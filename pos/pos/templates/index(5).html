
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style(4).css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
   
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <ul>
                <li><a href="index (5).html" class="toggle" data-content="dashboard"><i class="fa fa-tachometer-alt"></i> Dashboard</a></li>

                <li>
                    <a href="#" class="toggle" data-content="User-Management"><i class="fa fa-users"></i> User Management</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="Users"><i class="fa fa-users"></i> Users</a></li>
                        <li><a href="#" class="submenu-link" data-content="Roles"><i class="fa fa-id-badge"></i> Roles</a></li>
                        <li><a href="#" class="submenu-link" data-content="Sales-Commission-Agents"><i class="fa fa-user-tie"></i> Sales Commission Agent</a></li>

                    </ul>
                </li>

                <li>
                    <a href="#" class="toggle" data-content="stocks"><i class="fa fa-chart-bar"></i> Stocks</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="add-stock"><i class="fa fa-plus"></i> Add Stock</a></li>
                        <li><a href="#" class="submenu-link" data-content="current-stock"><i class="fa fa-boxes"></i> Current Stock</a></li>
                        <li><a href="#" class="submenu-link" data-content="out-of-stock"><i class="fa fa-box-open text-danger"></i> Out of Stock</a></li>
                        <li>
                            <a href="#" class="submenu-link" data-content="Products"><i class="fa fa-box"></i> Products</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link" data-content="List-Products"><i class="fa fa-list"></i> List Products</a></li>
                                <li><a href="#" class="submenu-link" data-content="Print-Labels"><i class="fa fa-print"></i> Print Labels</a></li>
                                <li><a href="#" class="submenu-link" data-content="Variations"><i class="fa fa-th-large"></i> Variations</a></li>
                                <li><a href="#" class="submenu-link" data-content="Import-Products"><i class="fa fa-file-import"></i> Import Products</a></li>
                                <li><a href="#" class="submenu-link" data-content="Import-Opening-Stock"><i class="fa fa-file-import"></i> Import Opening Stock</a></li>
                                <li><a href="#" class="submenu-link" data-content="Selling-Price-Group"><i class="fa fa-tags"></i> Selling Price Group</a></li>
                                <li><a href="#" class="submenu-link" data-content="Units"><i class="fa fa-cogs"></i> Units</a></li>
                                <li><a href="#" class="submenu-link" data-content="Categories"><i class="fa fa-th-list"></i> Categories</a></li>
                                <li><a href="#" class="submenu-link" data-content="Brands"><i class="fa fa-briefcase"></i> Brands</a></li>
                                <li><a href="#" class="submenu-link" data-content="Warranties"><i class="fa fa-shield-alt"></i> Warranties</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="submenu-link" data-content="Stock-Transfers"><i class="fa fa-exchange-alt"></i> Stock Transfers</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link" data-content="List-Stock-Transfers"><i class="fa fa-list"></i> List-Stock-Transfers</a></li>
                                <li><a href="#" class="submenu-link" data-content="Add-Stock-Transfers"><i class="fa fa-plus"></i> Add-Stock-Transfers</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="submenu-link" data-content="Stock-Adjustment"><i class="fa fa-cogs"></i> Stock Adjustment</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link" data-content="List-Stock-Adjustment"><i class="fa fa-list"></i> List-Stock-Adjustments</a></li>
                                <li><a href="#" class="submenu-link" data-content="Add-Stock-Adjustments"><i class="fa fa-plus"></i> Add-Stock-Adjustments</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="toggle" data-content="billing"><i class="fa fa-file-invoice-dollar"></i> Billing</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="add-invoice"><i class="fa fa-plus-circle"></i> Add Invoice</a></li>
                        <li><a href="#" class="submenu-link" data-content="invoices"><i class="fa fa-list"></i> Invoices</a></li>
                    </ul>
                </li>

                <li>
                    <a href="#" class="toggle" data-content="contacts"><i class="fa fa-address-book"></i> Contacts</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="Suppliers"><i class="fa fa-truck"></i> Suppliers</a></li>
                        <li><a href="#" class="submenu-link" data-content="Customers"><i class="fa fa-users"></i> Customer</a></li>
                        <li><a href="#" class="submenu-link" data-content="Customer-Groups"><i class="fa fa-user-cog"></i> Customer Groups</a></li>
                        <li><a href="#" class="submenu-link" data-content="Import-Contacts"><i class="fa fa-file-import"></i> Import Contacts</a></li>

                    </ul>
                </li>
                <li>
                    <a href="#" class="toggle" data-content="Transcations"><i class="fa fa-exchange-alt"></i> Transactions</a>
                    <ul class="submenu">
                        <li>
                            <a href="#" class="submenu-link" data-content="Purchases"><i class="fa fa-shopping-basket"></i> Purchases</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link" data-content="Purchase-Requisition"><i class="fa fa-file-invoice"></i> Purchase Requisition</a></li>
                                <li><a href="#" class="submenu-link" data-content="Purchase-Order"><i class="fa fa-shopping-cart"></i> Purchase Order</a></li>
                                <li><a href="#" class="submenu-link" data-content="List-Purchase"><i class="fa fa-list"></i> List Purchase</a></li>
                                <li><a href="#" class="submenu-link" data-content="Add-Purchase"><i class="fa fa-cart-plus"></i> Add Purchase</a></li>
                                <li><a href="#" class="submenu-link" data-content="List-Purchase-Return"><i class="fa fa-reply-all"></i> List Purchase Return</a></li>

                            </ul>
                        </li>
                        <li>
                            <a href="#" class="submenu-link" data-content="Sales"><i class="fa fa-shopping-cart"></i> Sales</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link" data-content="Sales-Order"><i class="fa fa-file-invoice"></i> Sales Order</a></li>
                                <li><a href="#" class="submenu-link" data-content="List-POS"><i class="fa fa-users"></i> List POS</a></li>
                                <li><a href="#" class="submenu-link" data-content="POS"><i class="fa fa-user-plus"></i> POS</a></li>
                                <li><a href="#" class="submenu-link" data-content="List-Drafts"><i class="fa fa-file"></i> List Drafts</a></li>
                                <li><a href="#" class="submenu-link" data-content="List-Quotation"><i class="fa fa-file-alt"></i> List Quotation</a></li>
                                <li><a href="#" class="submenu-link" data-content="Import-Sales"><i class="fa fa-arrow-alt-circle-down"></i> Import Sales</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="submenu-link" data-content="Expenses"><i class="fa fa-credit-card"></i> Expenses</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link" data-content="List-Expenses"><i class="fa fa-list-alt"></i> List Expenses</a></li>
                                <li><a href="#" class="submenu-link" data-content="Add-Expense"><i class="fa fa-plus-circle"></i> Add Expense</a></li>
                                <li><a href="#" class="submenu-link" data-content="Expense-Categories"><i class="fa fa-tags"></i> Expense Categories</a></li>
                            </ul>
                        </li>

                    </ul>
                </li>
                <li>
                    <a href="#" class="toggle" data-content="Payment-Account"><i class="fa fa-wallet"></i> Payment Account</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="List-Account"><i class="fa fa-list-alt"></i> List Accounts</a></li>
                        <li><a href="#" class="submenu-link" data-content="Balance-Sheet"><i class="fa fa-balance-scale"></i> Balance Sheet</a></li>
                        <li><a href="#" class="submenu-link" data-content="Trial-Balance"><i class="fa fa-calculator"></i> Trial Balance</a></li>
                        <li><a href="#" class="submenu-link" data-content="Cash-Flow"><i class="fa fa-random"></i> Cash Flow</a></li>

                    </ul>
                </li>
                <li>
                    <a href="#" class="toggle" data-content="Reports"><i class="fa fa-file-alt"></i> Report</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="Profit/Loss-Report"><i class="fa fa-chart-line"></i> Proft/Loss Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Product-Purchase-Report"><i class="fa fa-file-alt"></i>Product Purchase Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Sales-Representative-Report"><i class="fa fa-user-chart"></i> Sales Representative Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Register-Report"><i class="fa fa-cash-register"></i> Register Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Expense-Report"><i class="fa fa-file-invoice-dollar"></i> Expense Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Sale-Payment-Report"><i class="fa fa-file-invoice"></i> Sales Payment Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Purchase-Payment-Report"><i class="fa fa-file-invoice-dollar"></i> Purchase Payment Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Product-Sale-Report"><i class="fa fa-chart-line"></i> Product Sale Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Items-Report"><i class="fa fa-user-box"></i> Items Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Purchase-&-Sale"><i class="fa fa-exchange-alt"></i> Purchase & Sale</a></li>
                        <li><a href="#" class="submenu-link" data-content="Trending-Products"><i class="fa fa-chart-line"></i> Trending Products</a></li>
                        <li><a href="#" class="submenu-link" data-content="Stock-Adjustment-Report"><i class="fa fa-cogs"></i> Stock Adjustment Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Stock-Report"><i class="fa fa-user-warehouse"></i> Stock Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Customer-Group-Report"><i class="fa fa-users"></i> Customer Group Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Supplier-&-Customer-Reports"><i class="fa fa-file-alt"></i> Supplier & Customer Reports</a></li>
                        <li><a href="#" class="submenu-link" data-content="Tax-Report"><i class="fa fa-file-invoice-dollar"></i> Tax Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Service-Staff-Report"><i class="fa fa-users-cog"></i> Service Staff Report</a></li>
                        <li><a href="#" class="submenu-link" data-content="Payment-Account-Report"><i class="fa fa-credit-card"></i> Payment Account Report</a></li>

                    </ul>
                </li>

                <li>
                    <a href="#" class="toggle" data-content="discount"><i class="fa fa-percent"></i> Discount</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="add-discount"><i class="fa fa-plus-square"></i> Add Discount</a></li>
                        <li><a href="#" class="submenu-link" data-content="product-wise-discount"><i class="fa fa-tag"></i> Product-wise Discount</a></li>
                    </ul>
                </li>
                <li><a href="#" class="toggle" data-content="Orders"><i class="fa fa-shopping-basket"></i> Orders</a></li>
                <li>
                    <a href="#" class="toggle" data-content="settings"><i class="fa fa-cogs"></i> Settings</a>
                    <ul class="submenu">
                        <li><a href="#" class="submenu-link" data-content="categories"><i class="fa fa-th-large"></i> Categories</a></li>
                        <li><a href="#" class="submenu-link" data-content="store-details"><i class="fa fa-store"></i> Store Details</a></li>
                        <li><a href="#" class="submenu-link" data-content="Barcode-Settings"><i class="fa fa-barcode"></i> Barcode Settings</a></li>
                        <li><a href="#" class="submenu-link" data-content="Receipt-Printers"><i class="fa fa-print"></i> Receipt Printers</a></li>
                        <li><a href="#" class="submenu-link" data-content="Tax-Rates"><i class="fa fa-percent"></i> Tax Rates</a></li>

                    </ul>
                </li>

            </ul>
            </li>
        </div>


        <!-- dashboardddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd  -->
        <div class="content" id="content">
            <!-- Dashboard Section -->
            <div id="dashboardSection" class="section">
                <div class="dashboard-container">
                    <!-- Chart Column -->
                    <div class="chart-column">
                        <h1>Urban Arts Point of Sale</h1>
                        <canvas id="lineChart" width="400" height="200"></canvas>
                        <script>
                            fetch('/api/monthly-sales/')
                            .then(response => response.json())
                            .then(data => {
                                const labels = data.map(entry => entry.month);
                                const sales = data.map(entry => entry.sales);
                        
                                const ctxLine = document.getElementById('lineChart').getContext('2d');
                                const lineChart = new Chart(ctxLine, {
                                    type: 'line',
                                    data: {
                                        labels: labels,
                                        datasets: [{
                                            label: 'Monthly Sales',
                                            data: sales,
                                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                            borderColor: 'rgba(54, 162, 235, 1)',
                                            borderWidth: 2,
                                            fill: true,
                                            tension: 0.1
                                        }]
                                    },
                                    options: {
                                        scales: {
                                            y: {
                                                beginAtZero: true
                                            }
                                        },
                                        responsive: true,
                                        plugins: {
                                            legend: {
                                                position: 'top'
                                            }
                                        }
                                    }
                                });
                            });                        
                        </script>
                    </div>

                    <!-- Drawing Column -->
                    <div class="drawing-column">
                        <!-- Doughnut Chart -->
                        <div class="chart-container8">
                            <h2>Most Sold Category of Products</h2>
                            <canvas id="myDoughnutChart"></canvas>
                            <script>
                                fetch('/api/product-category-sales/')
                                .then(response => response.json())
                                .then(data => {
                                    const labels = data.map(item => item.category);
                                    const salesPercentages = data.map(item => item.sales_percentage);
                            
                                    const ctxDoughnut = document.getElementById('myDoughnutChart').getContext('2d');
                                    const myDoughnutChart = new Chart(ctxDoughnut, {
                                        type: 'doughnut',
                                        data: {
                                            labels: labels,
                                            datasets: [{
                                                label: 'Most Sold Category of Products',
                                                data: salesPercentages,
                                                backgroundColor: ['#000000', '#964B00', '#600A69', '#0000FF', '#008000'],
                                                hoverBackgroundColor: ['#FF4366', '#47A9D1', '#CCCCCC', '#FFD24E', '#33CC33']
                                            }]
                                        },
                                        options: {
                                            responsive: true,
                                            plugins: {
                                                legend: {
                                                    position: 'right'
                                                },
                                                tooltip: {
                                                    callbacks: {
                                                        label: function (tooltipItem) {
                                                            return tooltipItem.label + ': ' + tooltipItem.raw + '%';
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    });
                                });
                            
                            </script>
                        </div>
                    </div>
                </div>

                <!-- Tablet Column-->
                <h2>Sales Payment Due</h2>

                <div id="paymentdue-infocolumn">
                    <div class="tablet-column">
                        <table id="paymentDueTable">
                            <thead>
                                <tr>
                                    <th>Customer</th>
                                    <th>Invoice Number</th>
                                    <th>Due Amount</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be dynamically added here using JavaScript -->
                            </tbody>
                        </table>

                        <script>
                            fetch('/api/payment-due/')
                            .then(response => response.json())
                            .then(data => {
                                const tableBody = document.querySelector("#paymentDueTable tbody");
                        
                                data.forEach(payment => {
                                    const row = document.createElement("tr");
                        
                                    const customerCell = document.createElement("td");
                                    customerCell.textContent = payment.customer_name;
                                    row.appendChild(customerCell);
                        
                                    const invoiceCell = document.createElement("td");
                                    invoiceCell.textContent = payment.invoice_number;
                                    row.appendChild(invoiceCell);
                        
                                    const amountCell = document.createElement("td");
                                    amountCell.textContent = `$${payment.due_amount.toFixed(2)}`;
                                    row.appendChild(amountCell);
                        
                                    const actionCell = document.createElement("td");
                                    const actionButton = document.createElement("button");
                                    actionButton.classList.add("action-btn");
                                    actionButton.textContent = "Pay";
                                    actionButton.onclick = function () {
                                        alert("Payment initiated for " + payment.customer_name);
                                    };
                                    actionCell.appendChild(actionButton);
                                    row.appendChild(actionCell);
                        
                                    tableBody.appendChild(row);
                                });
                            });
                        
                        </script>
                    </div>

                    <!-- Info Column-->
                    <div class="info-column">
                        <!-- First row with two containers-->
                        <div class="info-row-row">
                            <div class="info-row">
                                <div class="value-placeholder">0</div>
                                <h3>Out of Stock Products</h3>
                            </div>
                            <div class="info-row">
                                <div class="value">125</div>
                                <h3>Number of Customers</h3>
                            </div>
                        </div>

                        <!-- Second row with Monthly Sales -->
                        <div class="info-row">
                            <div class="value">$12,340</div>
                            <h3>This Month Sales</h3>
                        </div>

                        <!-- Third row with Weekly Sales -->
                        <div class="info-row">
                            <div class="value">$3,250</div>
                            <h3>This Week Sales</h3>
                        </div>

                        <!-- Fourth row with Today's Sales -->
                        <div class="info-row">
                            <div class="value">$500</div>
                            <h3>Today's Sales</h3>
                        </div>

                        <script>
     fetch('/api/metrics/')
    .then(response => response.json())
    .then(data => {
        document.querySelector(".value-placeholder").textContent = data.out_of_stock_products;
        document.querySelectorAll(".info-row .value")[0].textContent = data.number_of_customers;
        document.querySelectorAll(".info-row .value")[1].textContent = `$${data.monthly_sales.toFixed(2)}`;
        document.querySelectorAll(".info-row .value")[2].textContent = `$${data.weekly_sales.toFixed(2)}`;
        document.querySelectorAll(".info-row .value")[3].textContent = `$${data.daily_sales.toFixed(2)}`;
    })
    .catch(error => console.error("Error fetching metrics data:", error));

                     </script>
 
                    </div>
                </div>
            </div>


            <!-- Users Section-->
            <div id="UsersSection" class="section" style="display: none;">
                <!-- Users Table -->
                <div id="usersTableContainer" class="users-table">
                    <h4>All Users</h4>

                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="userTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Email</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Example data rows -->
                                <tr>
                                    <td>john_doe</td>
                                    <td>John Doe</td>
                                    <td>Admin</td>
                                    <td>john.doe@example.com</td>
                                    <td><button class="action-btn" onclick="viewUser('john_doe')">View</button></td>
                                </tr>
                                <tr>
                                    <td>jane_smith</td>
                                    <td>Jane Smith</td>
                                    <td>Editor</td>
                                    <td>jane.smith@example.com</td>
                                    <td><button class="action-btn" onclick="viewUser('jane_smith')">View</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- jQuery and DataTables JS -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                        fetch('/api/users/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#userTable tbody");
        tableBody.innerHTML = ""; // Clear any existing rows

        data.forEach(user => {
            const row = document.createElement("tr");

            const usernameCell = document.createElement("td");
            usernameCell.textContent = user.username;
            row.appendChild(usernameCell);

            const nameCell = document.createElement("td");
            nameCell.textContent = `${user.first_name} ${user.last_name}`;
            row.appendChild(nameCell);

            const roleCell = document.createElement("td");
            roleCell.textContent = user.is_staff ? "Admin" : "Viewer"; // Adjust based on your model
            row.appendChild(roleCell);

            const emailCell = document.createElement("td");
            emailCell.textContent = user.email;
            row.appendChild(emailCell);

            const actionCell = document.createElement("td");
            const actionButton = document.createElement("button");
            actionButton.classList.add("action-btn");
            actionButton.textContent = "View";
            actionButton.onclick = function () {
                alert("View details for user: " + user.username);
            };
            actionCell.appendChild(actionButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching user data:", error));

                        $(document).ready(function () {
                            $('#userTable').DataTable({
                                dom: 'Bfrtip', // Define button layout
                                buttons: [
                                    'csv',
                                    'excel',
                                    'print',
                                    'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true, // Make the table responsive
                                paging: true,    // Enable pagination
                                pageLength: 5    // Default number of rows per page
                            });
                        });

                        function viewUser(username) {
                            alert('View details for user: ' + username);
                        }
                    </script>
                </div>
            </div>


            <!-- Roooleeeessss Section-->
            <div id="RolesSection" class="section" style="display: none;">
                <h3>Roles</h3>
                <div id="RolesTablecontainer" class="roles-table">
                    <!-- Roles Table -->
                    <h4>All Roles</h4>
                    <div id="tableWrapper" class="table-container">

                        <table id="rolesTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Role</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Admin</td>
                                    <td><button onclick="viewRole('Admin')">View</button></td>
                                </tr>
                                <tr>
                                    <td>Editor</td>
                                    <td><button onclick="viewRole('Editor')">View</button></td>
                                </tr>
                                <tr>
                                    <td>Viewer</td>
                                    <td><button onclick="viewRole('Viewer')">View</button></td>
                                </tr>
                                <!-- Add more roles as needed -->
                            </tbody>
                        </table>
                    </div>

                    <!-- jQuery -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <!-- DataTables JS -->
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

                    <script>
                        fetch('/api/roles/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#rolesTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(role => {
            const row = document.createElement("tr");

            const roleCell = document.createElement("td");
            roleCell.textContent = role.name;
            row.appendChild(roleCell);

            const actionCell = document.createElement("td");
            const actionButton = document.createElement("button");
            actionButton.textContent = "View";
            actionButton.onclick = function () {
                alert("View details for role: " + role.name);
            };
            actionCell.appendChild(actionButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching roles:", error));

                        $(document).ready(function () {
                            $('#rolesTable').DataTable({
                                responsive: true, // Makes the table responsive
                                paging: true,    // Enables pagination
                                searching: true   // Enables the search bar
                            });
                        });

                        function viewRole(role) {
                            alert('View details for role: ' + role);
                        }
                    </script>

                </div>
            </div>


            <!-- Commmmmmmiiiiiiiiisssssssssiiiiiiiiiiioooooooooooonnnnn Aggggggggggeeeeeeeeeeeeeeennnnnnnnnnnnntttttttttttttttsssssss -->
            <div id="Sales-Commission-AgentsSection" class="section" style="display: none;">

                <!-- SCA Table -->
                <div id="salescommissionagentsTableContainer" class="salescommissionagents-table">
                    <h4>All Sales Commission Agents</h4>
                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="salescommissionagentsTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone Number</th>
                                    <th>Sales Commission (%)</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>

                                
                            </tbody>
                        </table>
                    </div>
                    <!-- jQuery and DataTables JS -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                        fetch('/api/sales-commission-agents/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#salescommissionagentsTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(agent => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = agent.name;
            row.appendChild(nameCell);

            const emailCell = document.createElement("td");
            emailCell.textContent = agent.email;
            row.appendChild(emailCell);

            const phoneCell = document.createElement("td");
            phoneCell.textContent = agent.phone_number;
            row.appendChild(phoneCell);

            const commissionCell = document.createElement("td");
            commissionCell.textContent = agent.sales_commission;
            row.appendChild(commissionCell);

            const actionCell = document.createElement("td");
            const actionButton = document.createElement("button");
            actionButton.textContent = "View";
            actionButton.onclick = function () {
                alert("View details for agent: " + agent.name);
            };
            actionCell.appendChild(actionButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching sales commission agents:", error));

                        $(document).ready(function () {
                            $('#salescommissionagentsTable').DataTable({
                                dom: 'Bfrtip', // Define button layout
                                buttons: [
                                    'csv',
                                    'excel',
                                    'print',
                                    'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true, // Make the table responsive
                                paging: true,    // Enable pagination
                                pageLength: 5    // Default number of rows per pagce
                            });
                        });

                        function viewAgent(name) {
                            alert('View details for agent: ' + name);
                        }
                    </script>
                </div>
            </div>


            <!-- Print Labels Sectionnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn -->
            <div id="Print-LabelsSection" class="section" style="display: none;">
                <!-- Prints Table -->

                <div class="print-labels-container">
                    <!-- Add Product Section -->
                    <div class="add-product-section">
                        <h2>Print Labels</h2>
                        <div class="input-group">
                            <label for="product-search">Add products to generate Labels</label>
                            <div class="search-bar">
                                <input id="product-search" type="text" placeholder="Enter product name to print labels">
                            </div>
                        </div>
                        <table class="product-table">
                            <thead>
                                <tr>
                                    <th>Products</th>
                                    <th>No. of labels</th>
                                    <th>Packing Date</th>
                                    <th>Selling Price Group</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table rows will dynamically load -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Information to Show in Labels -->
                    <div class="info-section">
                        <h3>Information to show in Labels</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label><input type="checkbox" checked> Product Name</label>
                                <input type="text" value="15">
                            </div>
                            <div class="info-item">
                                <label><input type="checkbox" checked> Product Variation (recommended)</label>
                                <input type="text" value="17">
                            </div>
                            <div class="info-item">
                                <label><input type="checkbox" checked> Product Price</label>
                                <input type="text" value="17">
                            </div>
                            <div class="info-item">
                                <label><input type="checkbox" checked> Business Name</label>
                                <input type="text" value="20">
                            </div>
                            <div class="info-item">
                                <label><input type="checkbox" checked> Print Packing Date</label>
                                <input type="text" value="12">
                            </div>
                            <div class="info-item">
                                <label for="show-price">Show Price:</label>
                                <select id="show-price">
                                    <option value="inc-tax">Inc. tax</option>
                                    <option value="exc-tax">Exc. tax</option>
                                </select>
                            </div>
                 
                    </div>

                    <!-- Barcode Settings -->
                    <div class="barcode-section">
                        <h3>Barcode Setting:</h3>
                        <select>
                            <option value="40*30">40*30</option>
                            <option value="30*20">30*20</option>
                        </select>
                    </div>

                    <!-- Preview Button -->
                    <div class="preview-button">
                        <button>Preview</button>
                    </div>
                </div>
                <script>
                            fetch('/api/products/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector(".product-table tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(product => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = product.name;
            row.appendChild(nameCell);

            const labelsCell = document.createElement("td");
            const labelsInput = document.createElement("input");
            labelsInput.type = "number";
            labelsInput.min = "1";
            labelsCell.appendChild(labelsInput);
            row.appendChild(labelsCell);

            const packingDateCell = document.createElement("td");
            packingDateCell.textContent = product.packing_date;
            row.appendChild(packingDateCell);

            const priceGroupCell = document.createElement("td");
            priceGroupCell.textContent = `$${product.price}`;
            row.appendChild(priceGroupCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching products:", error));

                          </script>

                   
            </div>

            <!-- Varrrrrriiiiiiiaaaaaaatttttttttiiiiiiiioooooooonnnnnnnnsssss Section -->
            <div id="VariationsSection" class="section" style="display: none;">
                <!-- Variations Table -->
                <div id="variationsTableContainer" class="variations-table">

                    <h1>Variations Table</h1>

                    <!-- Search Bar -->
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Search variations..." onkeyup="filterTable()">
                    </div>

                    <table class="responsive-table" id="variationsTable">
                        <thead>
                            <tr>
                                <th>Variations</th>
                                <th>Values</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                           
                            <!-- Add more rows dynamically -->
                        </tbody>
                    </table>

                    <script>
                        fetch('/api/variations/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#variationsTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(variation => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = variation.name;
            row.appendChild(nameCell);

            const valuesCell = document.createElement("td");
            valuesCell.textContent = variation.values;
            row.appendChild(valuesCell);

            const actionCell = document.createElement("td");
            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.onclick = () => editVariation(variation.id, variation.name, variation.values);
            actionCell.appendChild(editButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching variations:", error));
});

                        // Filter table rows based on search input
                        function filterTable() {
                            const input = document.getElementById('searchInput');
                            const filter = input.value.toLowerCase();
                            const table = document.getElementById('variationsTable');
                            const rows = table.getElementsByTagName('tr');

                            for (let i = 1; i < rows.length; i++) {
                                const cells = rows[i].getElementsByTagName('td');
                                let rowMatch = false;
                                for (let j = 0; j < cells.length; j++) {
                                    if (cells[j]) {
                                        const cellValue = cells[j].textContent || cells[j].innerText;
                                        if (cellValue.toLowerCase().indexOf(filter) > -1) {
                                            rowMatch = true;
                                            break;
                                        }
                                    }
                                }
                                rows[i].style.display = rowMatch ? '' : 'none';
                            }
                        }

                        // Example function to respond to changes made
                        function editVariation(id, name, currentValues) {
    const newValues = prompt(`Edit values for variation: ${name}`, currentValues);
    if (newValues) {
        fetch(`/api/variations/${id}/`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, values: newValues }),
        })
        .then(response => {
            if (response.ok) {
                alert("Variation updated successfully!");
                location.reload(); // Reload the table to reflect changes
            } else {
                alert("Failed to update variation.");
            }
        });
    }
}

            function deleteVariation(id) {
    if (confirm("Are you sure you want to delete this variation?")) {
        fetch(`/api/variations/${id}/`, { method: 'DELETE' })
            .then(response => {
                if (response.ok) {
                    alert("Variation deleted successfully!");
                    location.reload();
                } else {
                    alert("Failed to delete variation.");
                }
            });
    }
}

                    </script>

                </div>
            </div>

            <!-- Selling Price Group -->
            <div id="Selling-Price-GroupSection" class="section" style="display: none;">

                <!-- SPG Table -->
                <div id="sellingpricegroupTableContainer" class="sellingpricegroup-table">


                    <h1>Selling Price Group Table</h1>

                    <!-- Search Bar -->
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Search groups..." onkeyup="filterTable()">
                    </div>
                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">

                        <table class="responsive-table" id="priceGroupTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                
                                <!-- Add more rows dynamically -->
                            </tbody>
                        </table>

                        <script>
                            fetch('/api/selling-price-groups/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#priceGroupTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(group => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = group.name;
            row.appendChild(nameCell);

            const descriptionCell = document.createElement("td");
            descriptionCell.textContent = group.description;
            row.appendChild(descriptionCell);

            const actionCell = document.createElement("td");
            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.onclick = () => editGroup(group.id, group.name, group.description);
            actionCell.appendChild(editButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching groups:", error));
});

                            // Filter table rows based on search input
                            function filterTable() {
                                const input = document.getElementById('searchInput');
                                const filter = input.value.toLowerCase();
                                const table = document.getElementById('priceGroupTable');
                                const rows = table.getElementsByTagName('tr');

                                for (let i = 1; i < rows.length; i++) {
                                    const cells = rows[i].getElementsByTagName('td');
                                    let rowMatch = false;
                                    for (let j = 0; j < cells.length; j++) {
                                        if (cells[j]) {
                                            const cellValue = cells[j].textContent || cells[j].innerText;
                                            if (cellValue.toLowerCase().indexOf(filter) > -1) {
                                                rowMatch = true;
                                                break;
                                            }
                                        }
                                    }
                                    rows[i].style.display = rowMatch ? '' : 'none';
                                }
                            }
                              function editGroup(id, name, currentDescription) {
    const newDescription = prompt(`Edit description for group: ${name}`, currentDescription);
    if (newDescription) {
        fetch(`/api/selling-price-groups/${id}/`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, description: newDescription }),
        })
        .then(response => {
            if (response.ok) {
                alert("Group updated successfully!");
                location.reload(); // Reload the table to reflect changes
            } else {
                alert("Failed to update group.");
            }
        });
    }
}
                        function deleteGroup(id) {
    if (confirm("Are you sure you want to delete this group?")) {
        fetch(`/api/selling-price-groups/${id}/`, { method: 'DELETE' })
            .then(response => {
                if (response.ok) {
                    alert("Group deleted successfully!");
                    location.reload();
                } else {
                    alert("Failed to delete group.");
                }
            });
    }
}

                           // Filter table rows based on search input
                        function filterTable() {
                            const input = document.getElementById('searchInput');
                            const filter = input.value.toLowerCase();
                            const table = document.getElementById('unitsTable');
                            const rows = table.getElementsByTagName('tr');

                            for (let i = 1; i < rows.length; i++) {
                                const cells = rows[i].getElementsByTagName('td');
                                let rowMatch = false;
                                for (let j = 0; j < cells.length; j++) {
                                    if (cells[j]) {
                                        const cellValue = cells[j].textContent || cells[j].innerText;
                                        if (cellValue.toLowerCase().indexOf(filter) > -1) {
                                            rowMatch = true;
                                            break;
                                        }
                                    }
                                }
                        </script>

                    </div>
                </div>
            </div>

            <!-- Unnnnnnnnnnnnniiiiiiiiiiiiitttttttttttttttttttttttsssssssssssssssssssssssssssssssssssssssssssssssssssssss -->
            <div id="UnitsSection" class="section" style="display: none;">

                <!-- Units Table -->
                <div id="unitsTableContainer" class="units-table">

                    <h1>Units Table</h1>

                    <!-- Search Bar -->
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Search units..." onkeyup="filterTable()">
                    </div>

                    <table class="responsive-table" id="unitsTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Abbreviation</th>
                                <th>Allow Decimal</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <!-- Add more rows dynamically -->
                        </tbody>
                    </table>

                    <script>
                        fetch('/api/units/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#unitsTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(unit => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = unit.name;
            row.appendChild(nameCell);

            const abbreviationCell = document.createElement("td");
            abbreviationCell.textContent = unit.abbreviation;
            row.appendChild(abbreviationCell);

            const allowDecimalCell = document.createElement("td");
            allowDecimalCell.textContent = unit.allow_decimal ? "Yes" : "No";
            row.appendChild(allowDecimalCell);

            const actionCell = document.createElement("td");
            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.onclick = () => editUnit(unit.id, unit.name, unit.abbreviation, unit.allow_decimal);
            actionCell.appendChild(editButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching units:", error));
});
function editUnit(id, name, currentAbbreviation, currentAllowDecimal) {
    const newAbbreviation = prompt(`Edit abbreviation for unit: ${name}`, currentAbbreviation);
    const newAllowDecimal = confirm(`Allow decimal for unit: ${name}? (OK = Yes, Cancel = No)`);

    if (newAbbreviation !== null) {
        fetch(`/api/units/${id}/`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, abbreviation: newAbbreviation, allow_decimal: newAllowDecimal }),
        })
        .then(response => {
            if (response.ok) {
                alert("Unit updated successfully!");
                location.reload(); // Reload the table to reflect changes
            } else {
                alert("Failed to update unit.");
            }
        });
    }
}
function deleteUnit(id) {
    if (confirm("Are you sure you want to delete this unit?")) {
        fetch(`/api/units/${id}/`, { method: 'DELETE' })
            .then(response => {
                if (response.ok) {
                    alert("Unit deleted successfully!");
                    location.reload();
                } else {
                    alert("Failed to delete unit.");
                }
            });
    }
}

                        // Filter table rows based on search input
                        function filterTable() {
                            const input = document.getElementById('searchInput');
                            const filter = input.value.toLowerCase();
                            const table = document.getElementById('unitsTable');
                            const rows = table.getElementsByTagName('tr');

                            for (let i = 1; i < rows.length; i++) {
                                const cells = rows[i].getElementsByTagName('td');
                                let rowMatch = false;
                                for (let j = 0; j < cells.length; j++) {
                                    if (cells[j]) {
                                        const cellValue = cells[j].textContent || cells[j].innerText;
                                        if (cellValue.toLowerCase().indexOf(filter) > -1) {
                                            rowMatch = true;
                                            break;
                                        }
                                    }
                                }
                                rows[i].style.display = rowMatch ? '' : 'none';
                            }
                        }

                        
                    </script>

                </div>
            </div>

            <!-- Braaaaaannnnnnnnnnnnnnnnddddddddddddddddddddssssssssssssssssssssssss Section-->
            <div id="BrandsSection" class="section" style="display: none;">
                <!-- Brands Table -->
                <div id="brandsTableContainer" class="brands-table">

                    <h1>All your Brands</h1>

                    <!-- Search Bar -->
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Search brands..." onkeyup="filterTable()">
                    </div>
                    <table id="brandsTable" class="display nowrap" style="width:100%">
                        <thead>
                            <tr>
                                <th>Brands</th>
                                <th>Note</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Example data rows -->
                            <tr>
                                <td>Brand A</td>
                                <td>Premium quality electronics</td>
                                <td><button onclick="editBrand('Brand A')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Brand B</td>
                                <td>Affordable fashion</td>
                                <td><button onclick="editBrand('Brand B')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- jQuery -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <!-- DataTables JS -->
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                        fetch('/api/brands/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#brandsTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(brand => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = brand.name;
            row.appendChild(nameCell);

            const noteCell = document.createElement("td");
            noteCell.textContent = brand.note;
            row.appendChild(noteCell);

            const actionCell = document.createElement("td");
            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.onclick = () => editBrand(brand.id, brand.name, brand.note);
            actionCell.appendChild(editButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching brands:", error));
});
function editBrand(id, name, currentNote) {
    const newNote = prompt(`Edit note for brand: ${name}`, currentNote);

    if (newNote !== null) {
        fetch(`/api/brands/${id}/`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, note: newNote }),
        })
        .then(response => {
            if (response.ok) {
                alert("Brand updated successfully!");
                location.reload(); // Reload the table to reflect changes
            } else {
                alert("Failed to update brand.");
            }
        });
    }
}
function deleteBrand(id) {
    if (confirm("Are you sure you want to delete this brand?")) {
        fetch(`/api/brands/${id}/`, { method: 'DELETE' })
            .then(response => {
                if (response.ok) {
                    alert("Brand deleted successfully!");
                    location.reload();
                } else {
                    alert("Failed to delete brand.");
                }
            });
    }
}

                        $(document).ready(function () {
                            const table = $('#brandsTable').DataTable({
                                dom: 'Bfrtip', // Add buttons
                                buttons: [
                                    'csv', 'excel', 'print', 'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true // Make the table responsive
                            });

                            // Filter table rows based on search input
                            $('#searchInput').on('keyup', function () {
                                table.search(this.value).draw();
                            });
                        });

                        
                    </script>
                </div>
            </div>

            <!-- Waaaaaaaaaaaarrrrrrrrrrrrrrrraaaaaaaaaannnnnnnnnnnttttttttttttttttttiiiiiiiiiiiiiiiieeeeeeeeeeeeeeesssssssssss -->
            <!-- Warranties Section-->
            <div id="WarrantiesSection" class="section" style="display: none;">
                <!-- Warranties Table -->
                <div id="warrantiesTableContainer" class="warranties-table">
                    <h4>All Warranties</h4>

                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="warrantiesTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Duration</th>
                                    <th>Action</th>
                                </tr>
                            </thead>

                        </table>
                    </div>

                    <!-- jQuery and DataTables JS -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                        fetch('/api/warranties/')
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector("#warrantiesTable tbody");
        tableBody.innerHTML = ""; // Clear existing rows

        data.forEach(warranty => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = warranty.name;
            row.appendChild(nameCell);

            const descriptionCell = document.createElement("td");
            descriptionCell.textContent = warranty.description;
            row.appendChild(descriptionCell);

            const durationCell = document.createElement("td");
            durationCell.textContent = warranty.duration;
            row.appendChild(durationCell);

            const actionCell = document.createElement("td");
            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.onclick = () => editWarranty(warranty.id, warranty.name, warranty.description, warranty.duration);
            actionCell.appendChild(editButton);
            row.appendChild(actionCell);

            tableBody.appendChild(row);
        });
    })
    .catch(error => console.error("Error fetching warranties:", error));
});
function editWarranty(id, name, currentDescription, currentDuration) {
    const newDescription = prompt(`Edit description for warranty: ${name}`, currentDescription);
    const newDuration = prompt(`Edit duration for warranty: ${name}`, currentDuration);

    if (newDescription !== null && newDuration !== null) {
        fetch(`/api/warranties/${id}/`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, description: newDescription, duration: newDuration }),
        })
        .then(response => {
            if (response.ok) {
                alert("Warranty updated successfully!");
                location.reload(); // Reload the table to reflect changes
            } else {
                alert("Failed to update warranty.");
            }
        });
    }
}
function deleteWarranty(id) {
    if (confirm("Are you sure you want to delete this warranty?")) {
        fetch(`/api/warranties/${id}/`, { method: 'DELETE' })
            .then(response => {
                if (response.ok) {
                    alert("Warranty deleted successfully!");
                    location.reload();
                } else {
                    alert("Failed to delete warranty.");
                }
            });
    }
}

                        $(document).ready(function () {
                            $('#warrantiesTable').DataTable({
                                dom: 'Bfrtip', // Define button layout
                                buttons: [
                                    'csv',
                                    'excel',
                                    'print',
                                    'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true, // Make the table responsive
                                paging: true,    // Enable pagination

                            });
                        });

                        // Filter table rows based on search input
                        $('#searchInput').on('keyup', function () {
                            table.search(this.value).draw();
                        });
                   
                    </script>
                </div>
            </div>

            <!-- Puuuuurrrrrrrrrcccccchhhhhhhhhaaaaaaaaaaaaaaasssssssssssssseeeeeeeeeeeeeeeeeeeesssssssssssssssss -->
        
            <!-- Puuuurrrrcccchhhaaaaassseeeeee Reeeeeeeeqqqqqqqqquuuuuuuuuuiiiiiiiissssssssiiiiiittttttttiiiiiiioooooooonnnnnnn -->
            <!-- Purchase Requisition -->
            <div id="Purchase-RequisitionSection" class="section" style="display: none;">
                <!-- Purchase Requisition Table -->
                <div id="purchaserequisitionTableContainer" class="purchasesrequisition-table">
                    <h4>Purchase Requisition</h4>

                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="purchaserequisitionTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Action</th>
                                    <th>Date</th>
                                    <th>Reference No</th>
                                    <th>Location</th>
                                    <th>Status</th>
                                    <th>Date Required</th>
                                    <th>Added by</th>
                                </tr>
                            </thead>

                        </table>
                    </div>

                    <!-- jQuery and DataTables JS -->

                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                        $(document).ready(function () {
    const table = $('#purchaserequisitionTable').DataTable({
        ajax: '/api/requisitions/',
        columns: [
            { data: 'action', defaultContent: '<button class="edit-btn">Edit</button>' },
            { data: 'date' },
            { data: 'reference_number' },
            { data: 'location' },
            { data: 'status' },
            { data: 'date_required' },
            { data: 'added_by' },
        ],
        dom: 'Bfrtip',
        buttons: ['csv', 'excel', 'print', 'colvis', 'pdf'],
        responsive: true,
    });

    $('#purchaserequisitionTable tbody').on('click', '.edit-btn', function () {
        const row = table.row($(this).closest('tr')).data();
        const newStatus = prompt(`Edit status for ${row.reference_number}:`, row.status);
        if (newStatus) {
            $.ajax({
                url: `/api/requisitions/${row.reference_number}/`,
                method: 'PATCH',
                data: JSON.stringify({ status: newStatus }),
                contentType: 'application/json',
                success: function () {
                    table.ajax.reload();
                },
                error: function () {
                    alert('Failed to update status.');
                },
            });
        }
    });
});
 
</script>

                    
                </div>
            </div>

            <!-- Puuuurrrrcccchhhaaaaassseeeeee Ooooooorrrrrrrrrrddddddddeeeeeeeeeeeeeeeeeeeeerrrrrrrrrrrrrrrrrrrrrrrrrrrrr -->
            <!-- Purchase Order  -->
            <div id="Purchase-OrderSection" class="section" style="display: none;">
                <!-- Purchase Order Table -->
                <div id="purchaseorderTableContainer" class="purchaseorder-table">
                    <h4>Purchase Order</h4>

                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="purchaseorderTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Action</th>
                                    <th>Date</th>
                                    <th>Reference No</th>
                                    <th>Location</th>
                                    <th>Supplier</th>
                                    <th>Status</th>
                                    <th>Quantity Remaining</th>
                                    <th>Shipping Status</th>
                                    <th>Added by</th>
                                </tr>
                            </thead>

                        </table>
                    </div>

                    <!-- jQuery and DataTables JS -->
                    <!-- jQuery -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <!-- DataTables JS -->
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                   $('#purchaseorderTable').DataTable({
    ajax: '/api/purchase-orders/',
    columns: [
        { data: null, render: () => '<button>Edit</button>' }, // Action Column
        { data: 'date' },
        { data: 'reference_no' },
        { data: 'location' },
        { data: 'supplier' },
        { data: 'status' },
        { data: 'quantity_remaining' },
        { data: 'shipping_status' },
        { data: 'added_by' }
    ],
    dom: 'Bfrtip',
    buttons: ['csv', 'excel', 'print', 'colvis'],
    responsive: true
});
                    </script>
                </div>
            </div>

            <!-- Liiiiiiiiiisssssssssstttttttttttttttttttttt   Puuuurrrrcccchhhaaaaassseeeeeesssssssss -->
            <!-- List Purchases -->
            <div id="List-PurchasesSection" class="section" style="display: none;">
                <!-- List Purchases Table -->
                <div id="listpurchasesTableContainer" class="listpurchases-table">
                    <h4>List Purchases</h4>

                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="listpurchasesTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Action</th>
                                    <th>Date</th>
                                    <th>Reference No</th>
                                    <th>Location</th>
                                    <th>Supplier</th>
                                    <th>Purchase Status</th>
                                    <th>Payment Status</th>
                                    <th>Grand Total</th>
                                    <th>Payment Due</th>
                                    <th>Total</th>

                                </tr>
                            </thead>

                        </table>
                    </div>

                    <!-- jQuery and DataTables JS -->

                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

                    <script>
                        $('#listpurchasesTable').DataTable({
    ajax: '/api/list-purchases/',
    columns: [
        { data: null, render: () => '<button>Edit</button>' }, // Action Column
        { data: 'date' },
        { data: 'reference_no' },
        { data: 'location' },
        { data: 'supplier' },
        { data: 'purchase_status' },
        { data: 'payment_status' },
        { data: 'grand_total' },
        { data: 'payment_due' },
        { data: 'total' }
    ],
    dom: 'Bfrtip',
    buttons: ['csv', 'excel', 'print', 'colvis'],
    responsive: true
});

          
                    </script>
                </div>
            </div>


            <!-- Aaaaaaaaaaaaadddddddddddddddddddddddddd   Puuuurrrrcccchhhaaaaassseeeeeesssssssss -->
            <!-- Add Purchases -->
            <!-- Add Purchases Section -->
<div id="Add-PurchasesSection" class="section" style="display: none;">
    <!-- Add Purchases Table -->
    <div id="addpurchasesTableContainer" class="addpurchases-table">
        <h4>Add Purchases</h4>

        <!-- Table -->
        <div id="tableWrapper" class="table-container">
            <table id="addpurchasesTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>Date</th>
                        <th>Reference No</th>
                        <th>Location</th>
                        <th>Supplier</th>
                        <th>Purchase Status</th>
                        <th>Payment Status</th>
                        <th>Grand Total</th>
                        <th>Payment Due</th>
                        <th>Total</th>
                    </tr>
                </thead>
            </table>
        </div>

        <!-- DataTables Initialization -->
        <script>
            $(document).ready(function () {
    const addPurchasesTable = $('#addpurchasesTable').DataTable({
        ajax: {
            url: '/api/purchases/',
            type: 'GET',
            dataSrc: '',
        },
        columns: [
            { data: null, render: () => '<button>Edit</button>' }, // Action column
            { data: 'date' },
            { data: 'reference_no' },
            { data: 'location' },
            { data: 'supplier' },
            { data: 'purchase_status' },
            { data: 'payment_status' },
            { data: 'grand_total' },
            { data: 'payment_due' },
            { data: 'total' },
        ],
        dom: 'Bfrtip',
        buttons: ['csv', 'excel', 'print', 'colvis', 'pdfHtml5'],
        responsive: true,
        paging: true,
    });

    $('#searchInput').on('keyup', function () {
        addPurchasesTable.search(this.value).draw();
    });
});

        </script>
    </div>
</div>

<!-- List Purchases Returned Section -->
<div id="List-Purchases-ReturnedSection" class="section" style="display: none;">
    <!-- List Purchases Returned Table -->
    <div id="listpurchasesreturnedTableContainer" class="listpurchasesreturned-table">
        <h4>List Purchases Returned</h4>

        <!-- Table -->
        <div id="tableWrapper" class="table-container">
            <table id="listpurchasesreturnedTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Reference No</th>
                        <th>Parent Purchase</th>
                        <th>Location</th>
                        <th>Supplier</th>
                        <th>Payment Status</th>
                        <th>Grand Total</th>
                        <th>Payment Due</th>
                        <th>Total</th>
                        <th>Action</th>
                    </tr>
                </thead>
            </table>
        </div>

        <!-- DataTables Initialization -->
        <script>
            
    $(document).ready(function () {
        const purchasesReturnedTable = $('#listpurchasesreturnedTable').DataTable({
            dom: 'Bfrtip',
            buttons: [
                'csv',
                'excel',
                'print',
                'colvis',
                {
                    extend: 'pdfHtml5',
                    orientation: 'landscape',
                    pageSize: 'A4'
                }
            ],
            responsive: true,
            paging: true,
        });

        // Fetch data from Django API
        $.ajax({
            url: '/api/purchases/returned/',  // API endpoint for purchases
            method: 'GET',
            success: function(data) {
                data.forEach(purchase => {
                    purchasesReturnedTable.row.add([
                        purchase.created_at,
                        purchase.reference_number,
                        purchase.parent_purchase || '',
                        purchase.location,
                        purchase.supplier,
                        purchase.payment_status,
                        purchase.grand_total,
                        purchase.payment_due,
                        purchase.total,
                        `<button onclick="editReturn('${purchase.reference_number}')">Edit</button>`
                    ]).draw();
                });
            },
            error: function(error) {
                console.error('Error fetching data:', error);
            }
        });

        window.editReturn = function (referenceNumber) {
            const newStatus = prompt(`Edit payment status for ${referenceNumber}:`, "Unpaid");
            if (newStatus) {
                alert(`Payment status for ${referenceNumber} updated to: ${newStatus}`);
                purchasesReturnedTable.rows().every(function () {
                    const rowData = this.data();
                    if (rowData && rowData[1] === referenceNumber) {
                        this.cell(this.index(), 5).data(newStatus).draw();
                    }
                });
            }
        };
    });


        </script>
    </div>
</div>

<!-- Saaaaaallllllllllllllllleeeeeeeeeeessssssssssssssssssssssssssssssss -->

<!-- POS -->
           
                        <!-- Header Section -->
                        <header>
                            <div class="location">
                                <strong>Location:</strong> Head Office
                            </div>
                            <div class="time" id="current-time">Loading...</div>
                        </header>
                    
                        <!-- Main POS Layout -->
                        <main class="pos-container">
                            <!-- Customer Section -->
                            <section class="customer-section">
                                <div class="customer-options">
                                    <label for="customer">Walk-In Customer</label>
                                    <select id="customer">
                                        <option>Walk-In Customer</option>
                                        <option>Regular Customer</option>
                                    </select>
                                    <button class="add-btn">+</button>
                                </div>
                                <div class="agent-options">
                                    <label for="agent">Commission Agent</label>
                                    <select id="agent">
                                        <option>Select Agent</option>
                                    </select>
                                </div>
                                <div class="staff-options">
                                    <label for="staff">Select Service Staff</label>
                                    <select id="staff">
                                        <option>Select Staff</option>
                                    </select>
                                </div>
                            </section>
                    
                            <!-- Product Search and Cart Section -->
                            <section class="product-cart">
                                <div class="search-bar">
                                    <input type="text" placeholder="Enter Product name / SKU / Scan bar code">
                                </div>
                    
                                <table class="cart-table">
                                    <thead>
                                        <tr>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Price inc. tax</th>
                                            <th>Subtotal</th>
                                            <th>X</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Rows dynamically added here -->
                                    </tbody>
                                </table>
                            </section>
                    
                            <!-- Product Tiles -->
                            <section class="product-grid">
                                <div class="product-tile">0.3L THERMOS<br>(1681)</div>
                                <div class="product-tile">0.75L THERMOS<br>(2699)</div>
                                <div class="product-tile">001 BLACK LEATHER SEAT<br>(2809)</div>
                                <div class="product-tile">002 SEATER BEIGE SEAT<br>(2810)</div>
                                <div class="product-tile">003 BROWN COFFEE TABLE<br>(2811)</div>
                            </section>
                        </main>
                    
                        <!-- Footer Actions -->
                        <footer>
                            <div class="footer-buttons">
                                <button class="btn draft">Draft</button>
                                <button class="btn quotation">Quotation</button>
                                <button class="btn suspend">Suspend</button>
                                <button class="btn credit-sale">Credit Sale</button>
                                <button class="btn card">Card</button>
                                <button class="btn cash">Cash</button>
                                <button class="btn cancel">Cancel</button>
                            </div>
                            <div class="total-payable">
                                <strong>Total Payable:</strong> <span>0.00</span>
                            </div>
                        </footer>
                    
                        <!-- JavaScript for Dynamic Time -->
                        <script>
                            $(document).ready(function () {
                                // Load customers
                                $.ajax({
                                    url: '/api/customers/',
                                    method: 'GET',
                                    success: function (response) {
                                        response.forEach(customer => {
                                            $('#customer').append(`<option>${customer.name}</option>`);
                                        });
                                    }
                                });
                            
                                // Load agents
                                $.ajax({
                                    url: '/api/agents/',
                                    method: 'GET',
                                    success: function (response) {
                                        response.forEach(agent => {
                                            $('#agent').append(`<option>${agent.name}</option>`);
                                        });
                                    }
                                });
                            
                                // Load staff
                                $.ajax({
                                    url: '/api/staff/',
                                    method: 'GET',
                                    success: function (response) {
                                        response.forEach(staff => {
                                            $('#staff').append(`<option>${staff.name}</option>`);
                                        });
                                    }
                                });
                            
                                // Load products
                                $.ajax({
                                    url: '/api/products/',
                                    method: 'GET',
                                    success: function (response) {
                                        response.forEach(product => {
                                            $('.product-grid').append(`<div class="product-tile">${product.name}<br>(${product.sku})</div>`);
                                        });
                                    }
                                });
                            });
                            
                            function updateTime() {
                                const timeElement = document.getElementById("current-time");
                                const now = new Date();
                    
                                // Format Date and Time
                                const day = String(now.getDate()).padStart(2, '0');
                                const month = String(now.getMonth() + 1).padStart(2, '0'); // Months are zero-indexed
                                const year = now.getFullYear();
                                const hours = String(now.getHours()).padStart(2, '0');
                                const minutes = String(now.getMinutes()).padStart(2, '0');
                                const seconds = String(now.getSeconds()).padStart(2, '0');
                    
                                // AM/PM Format
                                const amPm = hours >= 12 ? 'PM' : 'AM';
                                const displayHours = hours % 12 || 12; // Convert to 12-hour format
                    
                                // Combine all into a readable format
                                const formattedTime = `${day}-${month}-${year} ${displayHours}:${minutes}:${seconds} ${amPm}`;
                                timeElement.textContent = formattedTime;
                            }
                    
                            // Update time every second
                            setInterval(updateTime, 1000);
                            updateTime(); // Initial call
                        </script>
           
<!-- Sales Order Section -->
<div id="Sales-OrderSection" class="section" style="display: none;">
    <div id="salesorderTableContainer" class="salesorder-table">
        <h4>Sales Order</h4>
        <div id="tableWrapper" class="table-container">
            <table id="salesorderTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>Date</th>
                        <th>Order No</th>
                        <th>Customer Name</th>
                        <th>Phone No</th>
                        <th>Location</th>
                        <th>Status</th>
                        <th>Shipping Status</th>
                        <th>Quantity Remaining</th>
                        <th>Added By</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- List Drafts Section -->
<div id="List-DraftsSection" class="section" style="display: none;">
    <div id="listdraftsTableContainer" class="listdrafts-table">
        <h4>List Drafts</h4>
        <div id="tableWrapper" class="table-container">
            <table id="listdraftsTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Reference No</th>
                        <th>Customer Name</th>
                        <th>Phone No</th>
                        <th>Location</th>
                        <th>Total Items</th>
                        <th>Added By</th>
                        <th>Action</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- List Quotation Section -->
<div id="List-QuotationSection" class="section" style="display: none;">
    <div id="listquotationTableContainer" class="listquotation-table">
        <h4>List Quotation</h4>
        <div id="tableWrapper" class="table-container">
            <table id="listquotationTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Reference No</th>
                        <th>Customer Name</th>
                        <th>Phone No</th>
                        <th>Location</th>
                        <th>Total Items</th>
                        <th>Added By</th>
                        <th>Action</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- List Sales Returns Section -->
<div id="List-Sales-ReturnsSection" class="section" style="display: none;">
    <div id="listsalesreturnsTableContainer" class="listsalesreturns-table">
        <h4>List Sales Returns</h4>
        <div id="tableWrapper" class="table-container">
            <table id="listsalesreturnsTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Invoice No</th>
                        <th>Parent Sale</th>
                        <th>Customer Name</th>
                        <th>Location</th>
                        <th>Payment Status</th>
                        <th>Total Amount</th>
                        <th>Payment Due</th>
                        <th>Action</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- Shipments Section -->
<div id="ShipmentsSection" class="section" style="display: none;">
    <div id="shipmentsTableContainer" class="shipments-table">
        <h4>Shipments</h4>
        <div id="tableWrapper" class="table-container">
            <table id="shipmentsTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>Date</th>
                        <th>Invoice No</th>
                        <th>Customer Name</th>
                        <th>Phone No</th>
                        <th>Location</th>
                        <th>Shipping Status</th>
                        <th>Payment Status</th>
                        <th>Service Staff</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- List Expenses Section -->
<div id="List-ExpensesSection" class="section" style="display: none;">
    <div id="listexpensesTableContainer" class="listexpenses-table">
        <h4>List Expenses</h4>
        <div id="tableWrapper" class="table-container">
            <table id="listexpensesTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>Date</th>
                        <th>Reference No</th>
                        <th>Customer Name</th>
                        <th>Recurring Details</th>
                        <th>Expense Category</th>
                        <th>Sub Category</th>
                        <th>Location</th>
                        <th>Payment Status</th>
                        <th>Tax</th>
                        <th>Total Amount</th>
                        <th>Payment Due</th>
                        <th>Expense For</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- Expenses Categories -->
            <div id="Expenses-CategoriesSection" class="section" style="display: none;">
                <!-- Expenses Categories Table -->
                <div id="expensescategoriesTableContainer" class="expensescategories-table">
                    <h4>Expenses Categories</h4>

                    <div id="tableWrapper" class="table-container">
                        <table id="expensescategoriesTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Category Name</th>
                                    <th>Category Code</th>
                                    <th>Action</th>


                                </tr>
                            </thead>

                        </table>
                    </div>
                </div>
            </div>

            <!-- List Accounts -->
            <div id="List-AccountsSection" class="section" style="display: none;">
                <!-- Table -->
                <div id="listaccountsTableContainer" class="listaccounts-table">
                    <h4>List Accounts</h4>

                    <div id="tableWrapper" class="table-container">
                        <table id="listaccountsTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Account Type</th>
                                    <th>Account Sub Type</th>
                                    <th>Account No</th>
                                    <th>Note</th>
                                    <th>Balance</th>
                                    <th>Account Details</th>
                                    <th>Added by</th>
                                    <th>Action</th>


                                </tr>
                            </thead>

                        </table>
                    </div>
                </div>
            </div>



<!-- jQuery and DataTables Scripts -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<script>
    

    $(document).ready(function () {
        const apiEndpoints = {
            salesOrder: "/api/sales-orders/",
            listDrafts: "/api/drafts/",
            listQuotations: "/api/quotations/",
            salesReturns: "/api/sales-returns/",
            shipments: "/api/shipments/",
            expenses: "/api/expenses/",
            expenseCategories: "/api/expense-categories/",
            accounts: "/api/accounts/"
        };
    
        function initializeDataTable(tableId, apiEndpoint) {
            $(`#${tableId}`).DataTable({
                ajax: {
                    url: apiEndpoint,
                    dataSrc: "" // Adjust based on API response structure
                },
                columns: getColumnsForTable(tableId),
                dom: "Bfrtip",
                buttons: [
                    "csv", "excel", "print", "colvis", 
                    {
                        extend: "pdfHtml5",
                        orientation: "landscape",
                        pageSize: "A4",
                    },
                ],
                responsive: true,
                paging: true,
            });
        }
    
        function getColumnsForTable(tableId) {
            const columnMappings = {
                salesorderTable: [
                    { data: "action" },
                    { data: "date" },
                    { data: "order_no" },
                    { data: "customer_name" },
                    { data: "phone_no" },
                    { data: "location" },
                    { data: "status" },
                    { data: "shipping_status" },
                    { data: "quantity_remaining" },
                    { data: "added_by" },
                ],
                listdraftsTable: [
                    { data: "date" },
                    { data: "reference_no" },
                    { data: "customer_name" },
                    { data: "phone_no" },
                    { data: "location" },
                    { data: "total_items" },
                    { data: "added_by" },
                    { data: "action" },
                ],
                listquotationTableTable: [
                { data: "date" },
                { data: "reference_no" },
                { data: "customer_name" },
                { data: "phone_no" },
                { data: "location" },
                { data: "total_items" },
                { data: "added_by" },
                { data: "action" },
                ],
                listsalesreturnsTable: [
                { data: "date" },
                { data: "invoice_no" },
                { data: "parent_sale" },
                { data: "customer_name" },
                { data: "location" },
                { data: "payment_status" },
                { data: "total_amount" },
                { data: "payment_due" },
                { data: "action" },
                ],
                shipmentsTableTable: [
                { data: "action" },
                { data: "date" },
                { data: "invoice_no" },
                { data: "customer_name" },
                { data: "phone_no" },
                { data: "location" },
                { data: "shipping_status" },
                { data: "payment_status" },
                { data: "service_staff" },
                ],
                listexpensesTable: [
                    { data: "action" },
                    { data: "date" },
                    { data: "reference_no" },
                    { data: "customer_name" },
                    { data: "recurring_details" },
                    { data: "expense_category" },
                    { data: "location" },
                    { data: "payment_status" },
                    { data: "tax" },
                    { data: "total_amount" },
                    { data: "payment_date" },
                    { data: "expense_for" },
                ],
                expensecategoryTable: [
                    { data: "category_name" },
                    { data: "category_code" },
                    { data: "action" },
                ],
                    listaccountsTable: [
                    { data: "name" },
                    { data: "account_type" },
                    { data: "account_sub_type" },
                    { data: "account_no" },
                    { data: "note" },
                    { data: "balance" },
                    { data: "account_details" },
                    { data: "added_by" },
                    { data: "action" },
                    
                ], 
                    
            };
            return columnMappings[tableId];
        }
    
        // Initialize tables with API endpoints
        const tableMappings = {
            salesorderTable: apiEndpoints.salesOrder,
            listdraftsTable: apiEndpoints.listDrafts,
            listquotationTable: apiEndpoints.listQuotations,
            listsalesreturnsTable: apiEndpoints.salesReturns,
            shipmentsTable: apiEndpoints.shipments,
            listexpensesTable: apiEndpoints.expenses,
            expensecategoryTable: apiEndpoints.expenseCategory,
            listaccountsTable: apiEndpoints.accounts,
        };
    
        Object.entries(tableMappings).forEach(([tableId, endpoint]) => {
            initializeDataTable(tableId, endpoint);
        });
    
        // Global search functionality
        $('#searchInput').on('keyup', function () {
            const value = this.value;
            Object.keys(tableMappings).forEach(id => $(`#${id}`).DataTable().search(value).draw());
        });
    });
    
</script>
            <!-- Balanceeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee Sheeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeet -->
            <div id="Balance-SheetSection" class="section" style="display: none;">

                <h1>Balance Sheet</h1>

                <div class="balance-sheet-container">
                    <!-- Assets Section -->
                    <div class="balance-sheet-section">
                        <h2>Assets</h2>
                        <table class="responsive-table" id="assetsTable">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Amount ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Cash</td>
                                    <td>5000</td>
                                </tr>
                                <tr>
                                    <td>Accounts Receivable</td>
                                    <td>3000</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="totals-row">
                                    <td>Total Assets</td>
                                    <td id="totalAssets">8000</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Liabilities Section -->
                    <div class="balance-sheet-section">
                        <h2>Liabilities</h2>
                        <table class="responsive-table" id="liabilitiesTable">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Amount ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Accounts Payable</td>
                                    <td>2000</td>
                                </tr>
                                <tr>
                                    <td>Loans</td>
                                    <td>1000</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="totals-row">
                                    <td>Total Liabilities</td>
                                    <td id="totalLiabilities">3000</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <!-- Equity Section -->
                <div class="balance-sheet-section">
                    <h2>Equity</h2>
                    <table class="responsive-table" id="equityTable">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Amount ($)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Owner's Equity</td>
                                <td>5000</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr class="totals-row">
                                <td>Total Equity</td>
                                <td id="totalEquity">5000</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <script>

                    // Function to fetch expenses
async function fetchExpenses() {
    const response = await fetch('/api/expenses/');
    const expenses = await response.json();
    // Here you can populate the expenses table with the fetched data
    populateExpensesTable(expenses);
}

// Function to fetch totals
async function fetchTotals() {
    const totalAssetsResponse = await fetch('/api/totals/assets/');
    const totalLiabilitiesResponse = await fetch('/api/totals/liabilities/');
    const totalEquityResponse = await fetch('/api/totals/equity/');

    const totalAssets = await totalAssetsResponse.json();
    const totalLiabilities = await totalLiabilitiesResponse.json();
    const totalEquity = await totalEquityResponse.json();

    // Update totals in the UI
    document.getElementById("totalAssets").textContent = totalAssets.total_assets.toFixed(2);
    document.getElementById("totalLiabilities").textContent = totalLiabilities.total_liabilities.toFixed(2);
    document.getElementById("totalEquity").textContent = totalEquity.total_equity.toFixed(2);
}

// Call the functions to fetch data when the page loads
document.addEventListener('DOMContentLoaded', function () {
    fetchExpenses();
    fetchTotals();
});

                    function calculateTotals() {
                        const getTotal = (tableId) => {
                            const rows = document.querySelectorAll(`#${tableId} tbody tr`);
                            return Array.from(rows).reduce((sum, row) => {
                                const amount = parseFloat(row.cells[1].textContent || "0");
                                return sum + amount;
                            }, 0);
                        };

                        // Calculate totals
                        const totalAssets = getTotal("assetsTable");
                        const totalLiabilities = getTotal("liabilitiesTable");
                        const totalEquity = getTotal("equityTable");

                        // Update totals
                        document.getElementById("totalAssets").textContent = totalAssets.toFixed(2);
                        document.getElementById("totalLiabilities").textContent = totalLiabilities.toFixed(2);
                        document.getElementById("totalEquity").textContent = totalEquity.toFixed(2);
                    }

                    // Recalculate totals on page load
                    document.addEventListener("DOMContentLoaded", calculateTotals);
                </script>
            </div>

            <!-- Triaaaaaaaaaaaaaaaaaaaaaaaal Baaaaaaaaaaaaalaaaaaaaaaaaaaaaaannnnnnnnnnnnnncccccccccccceeeeeeeeeeeee -->
            <div id="Trial-BalanceSection" class="section" style="display: none;">
                <h1>Trial Balance</h1>
            
                <table class="responsive-table" id="trialBalanceTable">
                    <thead>
                        <tr>
                            <th>Account</th>
                            <th>Debit ($)</th>
                            <th>Credit ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic rows will be inserted here -->
                    </tbody>
                    <tfoot>
                        <tr class="totals-row">
                            <td>Total</td>
                            <td id="totalDebit">0</td>
                            <td id="totalCredit">0</td>
                        </tr>
                    </tfoot>
                </table>
            
                <script>
                    async function fetchTrialBalance() {
                        const response = await fetch('/api/trial-balance/');
                        const trialBalanceData = await response.json();
            
                        const tbody = document.querySelector("#trialBalanceTable tbody");
                        tbody.innerHTML = ''; // Clear the table body before adding new rows
            
                        trialBalanceData.forEach(entry => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${entry.account_name}</td>
                                <td>${entry.debit}</td>
                                <td>${entry.credit}</td>
                            `;
                            tbody.appendChild(row);
                        });
            
                        fetchTotals();
                    }
            
                    async function fetchTotals() {
                        const response = await fetch('/api/trial-balance/totals/');
                        const totals = await response.json();
            
                        document.getElementById("totalDebit").textContent = totals.total_debit.toFixed(2);
                        document.getElementById("totalCredit").textContent = totals.total_credit.toFixed(2);
                    }
            
                    document.addEventListener("DOMContentLoaded", fetchTrialBalance);
                </script>
            </div>
            

            <!-- Caaaaaaaaaaaaaaaaaaaaaaaaasssssssssssshhhhhhhhhh Floooooooooooooooooooooooooooooooooooooooow -->
            <div id="Cash-FlowSection" class="section" style="display: none;">
                <h1>Cash Flow Table</h1>
            
                <table class="responsive-table" id="cashFlowTable">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Description</th>
                            <th>Amount ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic rows will be inserted here -->
                    </tbody>
                    <tfoot>
                        <tr class="totals-row">
                            <td colspan="2">Net Cash Flow</td>
                            <td id="totalCashFlow">0</td>
                        </tr>
                    </tfoot>
                </table>
            
                <script>
                    // Fetch cash flow data from the API
                    async function fetchCashFlow() {
                        const response = await fetch('/api/cash-flow/');
                        const cashFlowData = await response.json();
            
                        const tbody = document.querySelector("#cashFlowTable tbody");
                        tbody.innerHTML = ''; // Clear the table body before adding new rows
            
                        cashFlowData.forEach(entry => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${entry.category}</td>
                                <td>${entry.description}</td>
                                <td>${entry.amount}</td>
                            `;
                            tbody.appendChild(row);
                        });
            
                        fetchNetCashFlow();
                    }
            
                    // Fetch net cash flow (total cash flow)
                    async function fetchNetCashFlow() {
                        const response = await fetch('/api/cash-flow/net/');
                        const netCashFlow = await response.json();
            
                        document.getElementById('totalCashFlow').textContent = netCashFlow.net_cash_flow.toFixed(2);
                    }
            
                    // Call the fetch function when the page loads
                    document.addEventListener('DOMContentLoaded', fetchCashFlow);
                </script>
            
            </div>
            <!--Orrrrrrdddddddddddddddeeeeeeeeeeeeeeeeerrrrrrrssssssss-->
            <div id="OrdersSection" class="section" style="display: none;">
                <!-- Orders Table -->
                <div id="ordersTableContainer" class="orders-table">
                    <h4>Orders</h4>
            
                    <div id="tableWrapper" class="table-container">
                        <table id="ordersTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Order No</th>
                                    <th>Quantity</th>
                                    <th>Description</th>
                                    <th>Prices</th>
                                    <th>Payment Terms</th>
                                    <th>Delivery Date</th>
                                    <th>Delivery Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
            
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
            
                    <script>
                        $(document).ready(function () {
                            $('#ordersTable').DataTable({
                                dom: 'Bfrtip',
                                buttons: [
                                    'csv',
                                    'excel',
                                    'print',
                                    'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true,
                                paging: true,
                            });
            
                            // Fetch orders and populate the table
                            fetchOrders();
            
                            function fetchOrders() {
                                fetch('/api/orders/')
                                    .then(response => response.json())
                                    .then(data => {
                                        const tbody = document.querySelector("#ordersTable tbody");
                                        tbody.innerHTML = '';
                                        data.forEach(order => {
                                            const row = document.createElement('tr');
                                            row.innerHTML = `
                                                <td>${order.date}</td>
                                                <td>${order.order_no}</td>
                                                <td>${order.quantity}</td>
                                                <td>${order.description}</td>
                                                <td>${order.price}</td>
                                                <td>${order.payment_terms}</td>
                                                <td>${order.delivery_date}</td>
                                                <td>${order.delivery_status}</td>
                                                <td>
                                                    <button class="cancel-btn" onclick="cancelOrder('${order.order_no}')">Cancel</button>
                                                    <button class="refund-btn" onclick="refundOrder('${order.order_no}')">Refund</button>
                                                </td>
                                            `;
                                            tbody.appendChild(row);
                                        });
                                    });
                            }
            
                            // Cancel Order
                            function cancelOrder(orderNo) {
                                const confirmation = confirm(`Are you sure you want to cancel Order ${orderNo}?`);
                                if (confirmation) {
                                    fetch(`/api/orders/cancel/${orderNo}/`, { method: 'POST' })
                                        .then(response => response.json())
                                        .then(data => {
                                            alert(data.message);
                                            fetchOrders(); // Refresh the orders table
                                        });
                                }
                            }
            
                            // Refund Order
                            function refundOrder(orderNo) {
                                const confirmation = confirm(`Are you sure you want to refund Order ${orderNo}?`);
                                if (confirmation) {
                                    fetch(`/api/orders/refund/${orderNo}/`, { method: 'POST' })
                                        .then(response => response.json())
                                        .then(data => {
                                            alert(data.message);
                                            fetchOrders(); // Refresh the orders table
                                        });
                                }
                            }
                        });
                    </script>
                </div>
            </div>
          
            <!-- Profit/Loss Report Section -->
<div id="ProfitLossSection" class="section" style="display: none;">
    <!-- Profit/Loss Report Table -->
    <div id="profitLossReportTableContainer" class="profit-loss-report-table">
        <h4>Profit/Loss Report</h4>

        <!-- Table -->
        <div id="tableWrapper" class="table-container">
            <table id="profitLossReportTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Gross Profit ($)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Example Data -->
                    <tr>
                        <td>Product A</td>
                        <td>5000</td>
                    </tr>
                    <tr>
                        <td>Product B</td>
                        <td>3000</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- jQuery and DataTables JS -->
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

        <script>
            
                $(document).ready(function () {
                    // Fetch data from the API
                    $.ajax({
                        url: '/api/profit-loss-report/',
                        method: 'GET',
                        success: function (data) {
                            let tableBody = '';
                            data.forEach(report => {
                                tableBody += `<tr>
                                    <td>${report.product}</td>
                                    <td>${report.gross_profit}</td>
                                </tr>`;
                            });
                            $('#profitLossReportTable tbody').html(tableBody);
            
                            // Initialize DataTable
                            $('#profitLossReportTable').DataTable({
                                dom: 'Bfrtip',
                                buttons: [
                                    'csv',
                                    'excel',
                                    'print',
                                    'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true,
                                paging: true,
                            });
                        },
                        error: function (error) {
                            console.error('Error fetching data:', error);
                        }
                    });
                });
            
        </script>
    </div>
</div>

<!-- Sales Representation Report Section -->
<div id="Sales-Representation-ReportSection" class="section" style="display: none;">
    <!-- Table -->
    <div id="salesrepresentationreportTableContainer" class="salesrepresentationreport-table">
        <h4>Sales Representation Report</h4>

        <!-- Table -->
        <div id="tableWrapper" class="table-container">
            <table id="salesrepresentationreportTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Invoice No</th>
                        <th>Customer Name</th>
                        <th>Location</th>
                        <th>Payment Status</th>
                        <th>Total Amount</th>
                        <th>Total Paid</th>
                        <th>Total Remaining</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically added here -->
                </tbody>
            </table>
        </div>

        <!-- jQuery and DataTables JS -->
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

        <script>
            $(document).ready(function () {
                const table = $('#salesrepresentationreportTable').DataTable({
                    dom: 'Bfrtip',
                    buttons: [
                        'csv',
                        'excel',
                        'print',
                        'colvis',
                        {
                            extend: 'pdfHtml5',
                            orientation: 'landscape',
                            pageSize: 'A4',
                        },
                    ],
                    responsive: true,
                    paging: true,
                });
            
                // Fetch data from the Django API
                const fetchData = () => {
                    $.ajax({
                        url: '/api/sales-report/',
                        method: 'GET',
                        success: function (data) {
                            data.forEach((item) => {
                                table.row.add([
                                    item.date,
                                    item.invoice_no,
                                    item.customer_name,
                                    item.location,
                                    item.payment_status,
                                    `$${item.total_amount}`,
                                    `$${item.total_paid}`,
                                    `$${item.total_remaining}`,
                                ]).draw(false);
                            });
                        },
                        error: function (error) {
                            console.error('Error fetching sales data:', error);
                        },
                    });
                };
            
                fetchData();
            });
        </script>
    </div>      
</div>

            <!-- Register Repooooooooooooooooooooooooorrrrrrrrrrrrrrrrrrrrrrrrrrrrrttttttttttttttttttttttttttttttttttttttttttttttttt -->
            <!-- Register Report Section-->
            <div id="Register-ReportSection" class="section" style="display: none;">
                <!-- Table -->
                <div id="registerreportTableContainer" class="registerreport-table">
                    <h4>Register Report</h4>
            
                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="registerreportTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Open Time</th>
                                    <th>Close Time</th>
                                    <th>Location</th>
                                    <th>User</th>
                                    <th>Total Card Slips</th>
                                    <th>Total Cheques</th>
                                    <th>Total Cash</th>
                                    <th>Total Bank Transfer</th>
                                    <th>Total Advance Payment</th>
                                    <th>Mpesa</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be dynamically added -->
                            </tbody>
                        </table>
                    </div>
            
                    <!-- jQuery and DataTables JS -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
            
                    <script>
                        $(document).ready(function () {
                            const table = $('#registerreportTable').DataTable({
                                dom: 'Bfrtip',
                                buttons: [
                                    'csv',
                                    'excel',
                                    'print',
                                    'colvis',
                                    {
                                        extend: 'pdfHtml5',
                                        orientation: 'landscape',
                                        pageSize: 'A4'
                                    }
                                ],
                                responsive: true,
                                paging: true,
                            });
                        
                            // Fetch data from API and populate the table
                            const loadData = async () => {
                                try {
                                    const response = await fetch('/api/register-reports/');
                                    const data = await response.json();
                                    data.forEach(item => {
                                        table.row.add([
                                            item.open_time,
                                            item.close_time,
                                            item.location,
                                            item.user,
                                            item.total_card_slips,
                                            item.total_cheques,
                                            `$${item.total_cash}`,
                                            `$${item.total_bank_transfer}`,
                                            `$${item.total_advance_payment}`,
                                            `$${item.mpesa}`,
                                        ]).draw(false);
                                    });
                                } catch (error) {
                                    console.error('Error fetching register report data:', error);
                                }
                            };
                        
                            loadData();
                        });
                    </script>
                </div>
            </div>
            

            <!-- Sales Payment Report Section -->
            <div id="Sales-Payment-ReportSection" class="section" style="display: none;">
                <!-- Sales Payment Report Table -->
                <div id="salespaymentreportTableContainer" class="salespayment-table">
                    <h4>Sales Payment Report</h4>
            
                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="salespaymentreportTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Reference No</th>
                                    <th>Paid On</th>
                                    <th>Amount</th>
                                    <th>Customer</th>
                                    <th>Customer Groups</th>
                                    <th>Payment Method</th>
                                    <th>Sell</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be dynamically added -->
                            </tbody>
                        </table>
                    </div>
            
                    <!-- jQuery and DataTables JS -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
            
                    <script>
                       
                            $(document).ready(function () {
                                const table = $('#salespaymentreportTable').DataTable({
                                    dom: 'Bfrtip', // Define button layout
                                    buttons: [
                                        'csv',
                                        'excel',
                                        'print',
                                        'colvis',
                                        {
                                            extend: 'pdfHtml5',
                                            orientation: 'landscape',
                                            pageSize: 'A4'
                                        }
                                    ],
                                    responsive: true, // Make the table responsive
                                    paging: true,    // Enable pagination
                                });
                        
                                // Fetch data from the Django API
                                const fetchData = async () => {
                                    try {
                                        const response = await fetch('/api/sales-payment-report/');
                                        const data = await response.json();
                        
                                        data.forEach((item) => {
                                            table.row.add([
                                                item.reference_no,
                                                item.paid_on,
                                                `$${item.amount}`,
                                                item.customer,
                                                item.customer_groups,
                                                item.payment_method,
                                                item.sell,
                                                '<button>Edit</button>',
                                            ]).draw(false);
                                        });
                                    } catch (error) {
                                        console.error('Error fetching data:', error);
                                    }
                                };
                        
                                fetchData(); // Call the function to populate table data
                            });
                        </script>
                </div>
            </div>
                        
            <!-- Product Sale Report Section -->
<div id="Product-Sale-ReportSection" class="section" style="display: none;">
    <!-- Product Sale Report Table -->
    <div id="productsalereportTableContainer" class="productsalereport-table">
        <h4>Product Sale Report</h4>

        <!-- Table -->
        <div id="tableWrapper" class="table-container">
            <table id="productsalereportTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>SKU</th>
                        <th>Customer Name</th>
                        <th>Contact ID</th>
                        <th>Invoice No</th>
                        <th>Date</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Discount</th>
                        <th>Tax</th>
                        <th>Price inc. Tax</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically added -->
                </tbody>
            </table>
        </div>

        <!-- jQuery and DataTables JS -->
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

        <script>
            $(document).ready(function () {
                const table = $('#productsalereportTable').DataTable({
                    dom: 'Bfrtip', // Define button layout
                    buttons: [
                        'csv',
                        'excel',
                        'print',
                        'colvis',
                        {
                            extend: 'pdfHtml5',
                            orientation: 'landscape',
                            pageSize: 'A4'
                        }
                    ],
                    responsive: true, // Make the table responsive
                    paging: true,    // Enable pagination
                });
            
                // Fetch data from the API
                const loadData = () => {
                    $.ajax({
                        url: '/api/product-sales/',
                        method: 'GET',
                        success: function (data) {
                            data.forEach((item) => {
                                table.row.add([
                                    item.product,
                                    item.sku,
                                    item.customer_name,
                                    item.contact_id,
                                    item.invoice_no,
                                    item.date,
                                    item.quantity,
                                    `$${item.unit_price}`,
                                    `$${item.discount}`,
                                    `$${item.tax}`,
                                    `$${item.price_incl_tax}`,
                                    `$${item.total}`,
                                ]).draw(false);
                            });
                        },
                        error: function (err) {
                            console.error('Error fetching data:', err);
                        }
                    });
                };
            
                // Call the function to load data
                loadData();
            });
        </script>   
    </div>
</div>


            <!-- Items Repooooooooooooooooooooooooooooorrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrttttttttttttttttttttttttttttttttttttttttttttt -->
            <!-- Items Report Section-->
            <div id="Items-ReportSection" class="section" style="display: none;">
                <!-- Table -->
                <div id="itemsreportTableContainer" class="itemsreport-table">
                    <h4>Items Report</h4>
            
                    <!-- Table -->
                    <div id="tableWrapper" class="table-container">
                        <table id="itemsreportTable" class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>SKU</th>
                                    <th>Description</th>
                                    <th>Purchase Date</th>
                                    <th>Purchase</th>
                                    <th>Lot No</th>
                                    <th>Supplier</th>
                                    <th>Purchase Price</th>
                                    <th>Sell Date</th>
                                    <th>Sale</th>
                                    <th>Location</th>
                                    <th>Sell Quantity</th>
                                    <th>Selling Price</th>
                                    <th>Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be dynamically added -->
                            </tbody>
                        </table>
                    </div>
            
                    <!-- jQuery and DataTables JS -->
                    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
                    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
            
                    <script>
                      
                            $(document).ready(function () {
                                const table = $('#itemsreportTable').DataTable({
                                    dom: 'Bfrtip', // Define button layout
                                    buttons: [
                                        'csv',
                                        'excel',
                                        'print',
                                        'colvis',
                                        {
                                            extend: 'pdfHtml5',
                                            orientation: 'landscape',
                                            pageSize: 'A4'
                                        }
                                    ],
                                    responsive: true, // Make the table responsive
                                    paging: true,    // Enable pagination
                                });
                        
                                // Fetch data from the Django API and populate the table
                                const loadData = () => {
                                    $.ajax({
                                        url: '/api/items/',  // The URL of your API
                                        method: 'GET',
                                        success: function (data) {
                                            data.forEach((item) => {
                                                table.row.add([
                                                    item.product,
                                                    item.sku,
                                                    item.description,
                                                    item.purchase_date,
                                                    item.purchase,
                                                    item.lot_no,
                                                    item.supplier,
                                                    `$${item.purchase_price}`,
                                                    item.sell_date,
                                                    item.sale,
                                                    item.location,
                                                    item.sell_quantity,
                                                    `$${item.selling_price}`,
                                                    `$${item.subtotal}`,
                                                ]).draw(false);
                                            });
                                        },
                                        error: function (error) {
                                            console.error('Error fetching items:', error);
                                        }
                                    });
                                };
                        
                                // Call the function to load data
                                loadData();
                        
                                // Search filter functionality
                                $('#searchInput').on('keyup', function () {
                                    table.search(this.value).draw();
                                });
                            });
                        
                    </script>
                </div>
            </div>
          
            <!-- Purchase and Sale Section-->
<div id="Purchase-and-SaleSection" class="section" style="display: none;">
    <!-- Table -->
    <div id="purchaseandsaleTableContainer" class="purchaseandsale-table">
        <h4>Purchase and Sale</h4>

        <!-- Table -->
        <div id="tableWrapper" class="table-container">
            <table id="purchaseandsaleTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Total Sales</th>
                        <th>Sales including Tax</th>
                        <th>Total Sales Return including Tax</th>
                        <th>Sales Due</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically added -->
                </tbody>
            </table>
        </div>

        <!-- jQuery and DataTables JS -->
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

        <script>
            $(document).ready(function () {
                const table = $('#purchaseandsaleTable').DataTable({
                    dom: 'Bfrtip', // Define button layout
                    buttons: [
                        'csv',
                        'excel',
                        'print',
                        'colvis',
                        {
                            extend: 'pdfHtml5',
                            orientation: 'landscape',
                            pageSize: 'A4'
                        }
                    ],
                    responsive: true, // Make the table responsive
                    paging: true,    // Enable pagination
                });
            
                // Fetch data from the backend API
                const loadData = () => {
                    $.ajax({
                        url: '/purchase-sale/', // Make sure this matches the URL pattern defined in Django
                        method: 'GET',
                        success: function (data) {
                            // Iterate over the fetched data and add it to the table
                            data.forEach((item) => {
                                table.row.add([
                                    `$${item.total_sales}`,
                                    `$${item.sales_including_tax}`,
                                    `$${item.total_sales_return_including_tax}`,
                                    `$${item.sales_due}`
                                ]).draw(false);
                            });
                        },
                        error: function (error) {
                            console.error('Error fetching data:', error);
                        }
                    });
                };
            
                // Call the function to load data
                loadData();
            
                // Search filter functionality (ensure the correct table reference)
                $('#searchInput').on('keyup', function () {
                    table.search(this.value).draw();
                });
            });
            
        </script>
    </div>
</div>

                
<!-- Stock Report Section-->
<div id="Stock-ReportSection" class="section" style="display: none;">
    <h4>Stock Report</h4>

    <!-- Table -->
    <div id="tableWrapper" class="table-container">
        <table id="stockreportTable" class="responsive-table">
            <thead>
                <tr>
                    <th>SKU</th>
                    <th>Product</th>
                    <th>Variation</th>
                    <th>Category</th>
                    <th>Location</th>
                    <th>Unit Selling Price</th>
                    <th>Current Stock</th>
                    <th>Current Stock Value (by purchase price)</th>
                    <th>Current Stock Value (by sale price)</th>
                    <th>Potential Profit</th>
                    <th>Total Units Sold</th>
                    <th>Total Units Transferred</th>
                    <th>Total Units Adjusted</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be dynamically added -->
            </tbody>
        </table>
    </div>

    <!-- jQuery and DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

    <script>
       
            $(document).ready(function () {
                // Initialize the DataTable
                const table = $('#stockreportTable').DataTable({
                    dom: 'Bfrtip', // Define button layout
                    buttons: [
                        'csv',
                        'excel',
                        'print',
                        'colvis',
                        {
                            extend: 'pdfHtml5',
                            orientation: 'landscape',
                            pageSize: 'A4'
                        }
                    ],
                    responsive: true, // Make the table responsive
                    paging: true,    // Enable pagination
                });
        
                // Function to fetch and load stock data from the API
                const loadData = () => {
                    $.ajax({
                        url: '/api/stock-report/',  // API endpoint to fetch stock data
                        method: 'GET',
                        success: function(data) {
                            // Loop through the response data and add it to the table
                            data.forEach(item => {
                                table.row.add([
                                    item.sku,
                                    item.product,
                                    item.variation,
                                    item.category,
                                    item.location,
                                    `$${item.unit_selling_price}`,
                                    item.current_stock,
                                    `$${item.current_stock_value_purchase_price}`,
                                    `$${item.current_stock_value_sale_price}`,
                                    `$${item.potential_profit}`,
                                    item.total_units_sold,
                                    item.total_units_transferred,
                                    item.total_units_adjusted
                                ]).draw(false);
                            });
                        },
                        error: function(xhr, status, error) {
                            console.error('Failed to fetch stock data:', error);
                        }
                    });
                };
        
                // Call the function to load data
                loadData();
        
                // Search filter functionality (ensure the correct table reference)
                $('#searchInput').on('keyup', function () {
                    table.search(this.value).draw();
                });
            });
       
        
    </script>
</div>


<!-- Service Staff Report Section -->
<div id="Service-Staff-ReportSection" class="section" style="display: none;">
    <h4>Service Staff Report</h4>

    <div id="servicestaffreportTableContainer" class="servicestaffreport-table">
        <div id="tableWrapper" class="table-container">
            <table id="servicestaffreportTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Invoice no</th>
                        <th>Service Staff</th>
                        <th>Location</th>
                        <th>Subtotal</th>
                        <th>Total Discount</th>
                        <th>Total Tax</th>
                        <th>Total Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically added -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- jQuery and DataTables JS -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<script>
    
        $(document).ready(function () {
            // Initialize DataTable
            const servicestaffTable = initializeDataTable('servicestaffreportTable');
    
            // Function to load Service Staff data from the API
            const loadServiceStaffData = () => {
                $.ajax({
                    url: '/api/service-staff-report/',  // API endpoint
                    method: 'GET',
                    success: function(data) {
                        data.forEach(item => {
                            servicestaffTable.row.add([
                                item.date,
                                item.invoice_no,
                                item.staff_name,
                                item.location,
                                `$${item.subtotal}`,
                                `$${item.total_discount}`,
                                `$${item.total_tax}`,
                                `$${item.total_amount}`
                            ]).draw(false);
                        });
                    },
                    error: function(xhr, status, error) {
                        console.error('Failed to fetch service staff data:', error);
                    }
                });
            };
    
            // Load data into the table
            loadServiceStaffData();
    
            // Search functionality to filter rows in the table
            $('#searchInput').on('keyup', function () {
                servicestaffTable.search(this.value).draw();
            });
        });
   
</script>


<!-- Payment Account Report Section -->
<div id="Payment-Acccount-ReportSection" class="section" style="display: none;">
    <h4>Payment Account Report</h4>

    <div id="paymentaccountreportTableContainer" class="paymentaccountreport-table">
        <div id="tableWrapper" class="table-container">
            <table id="paymentaccountreportTable" class="responsive-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Payment Ref no</th>
                        <th>Invoice/Ref no</th>
                        <th>Amount</th>
                        <th>Payment Type</th>
                        <th>Account</th>
                        <th>Description</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically added -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- jQuery and DataTables JS -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<script>
   
        // Function to initialize a DataTable with common settings
        function initializeDataTable(tableId) {
            return $(`#${tableId}`).DataTable({
                dom: 'Bfrtip', // Define button layout
                buttons: [
                    'csv',
                    'excel',
                    'print',
                    'colvis',
                    {
                        extend: 'pdfHtml5',
                        orientation: 'landscape',
                        pageSize: 'A4'
                    }
                ],
                responsive: true,  // Make the table responsive
                paging: true       // Enable pagination
            });
        }
    
        $(document).ready(function () {
            // Initialize DataTable
            const paymentAccountTable = initializeDataTable('paymentaccountreportTable');
    
            // Function to load Payment Account data from the API
            const loadPaymentAccountData = () => {
                $.ajax({
                    url: '/api/payment-account-report/',  // API endpoint
                    method: 'GET',
                    success: function(data) {
                        data.forEach(item => {
                            paymentAccountTable.row.add([
                                item.date,
                                item.payment_ref_no,
                                item.invoice_ref_no,
                                `$${item.amount}`,
                                item.payment_type,
                                item.account,
                                item.description,
                                item.action
                            ]).draw(false);
                        });
                    },
                    error: function(xhr, status, error) {
                        console.error('Failed to fetch payment account data:', error);
                    }
                });
            };
    
            // Load data into the table
            loadPaymentAccountData();
    
            // Search functionality to filter rows in the table
            $('#searchInput').on('keyup', function () {
                paymentAccountTable.search(this.value).draw();
            });
        });
   
</script>

           
            <!-- sssssssssssssssssssssuuuuuuuuuuuuuppppppppppppppplllllllllllllllliiiiiiiiiiiiieeeeeeeeeeeeeeeerrrrrrrrrrrrsssssssss -->

               <div id="SuppliersSection" class="section" style="display: none;">
                    <!-- Suppliers Table -->
                    <div class="suppliers-table">
                        <h4>All Suppliers</h4>

                        <!-- Search Bar -->
                        <div class="search-container">
                            <input type="text" id="searchInput" placeholder="Search for suppliers..." onkeyup="filterTable()" class="search-input">
                        </div>

                        <!-- Table -->
                        <table class="responsive-table" id="suppliersTable">
                            <thead>
                                <tr>
                                    <th>Action</th>
                                    <th>Contact ID</th>
                                    <th>Business Name</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Tax Number</th>
                                    <th>Pay Term</th>
                                    <th>Opening Balance</th>
                                    <th>Advance Balance</th>
                                    <th>Date</th>
                                    <th>Address</th>
                                    <th>Mobile</th>
                                    <th>Total Purchase Due</th>
                                </tr>
                            </thead>
                            <tbody>
                               
                                <!-- More rows can be added here -->
                            </tbody>
                        </table>
                        <script>
                            // Function to initialize a DataTable with common settings
                            function initializeDataTable(tableId) {
                                return $(`#${tableId}`).DataTable({
                                    dom: 'Bfrtip', // Define button layout
                                    buttons: [
                                        'csv',
                                        'excel',
                                        'print',
                                        'colvis',
                                        {
                                            extend: 'pdfHtml5',
                                            orientation: 'landscape',
                                            pageSize: 'A4'
                                        }
                                    ],
                                    responsive: true,  // Make the table responsive
                                    paging: true       // Enable pagination
                                });
                            }
                        
                            $(document).ready(function () {
                                // Initialize DataTable
                                const suppliersTable = initializeDataTable('suppliersTable');
                        
                                // Function to load Suppliers data from the API
                                const loadSuppliersData = () => {
                                    $.ajax({
                                        url: '/api/suppliers/',  // API endpoint to fetch supplier data
                                        method: 'GET',
                                        success: function(data) {
                                            data.forEach(item => {
                                                suppliersTable.row.add([
                                                    `<button class="action-btn" onclick="viewSupplier('${item.contact_id}')">View</button>`,
                                                    item.contact_id,
                                                    item.business_name,
                                                    item.name,
                                                    item.email,
                                                    item.tax_number,
                                                    item.pay_term,
                                                    `$${item.opening_balance}`,
                                                    `$${item.advance_balance}`,
                                                    item.date,
                                                    item.address,
                                                    item.mobile,
                                                    `$${item.total_purchase_due}`
                                                ]).draw(false);
                                            });
                                        },
                                        error: function(xhr, status, error) {
                                            console.error('Failed to fetch supplier data:', error);
                                        }
                                    });
                                };
                        
                                // Load data into the table
                                loadSuppliersData();
                        
                                // Search functionality to filter rows in the table
                                $('#searchInput').on('keyup', function () {
                                    suppliersTable.search(this.value).draw();
                                });
                            });
                        </script>
                        
                    </div>
                </div>

                <!--Cuuuuuuuuussssssssstttttttttttoooooooooooooooooommmmmmmmmmmmmmmmmmmmmmmmmeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeerrrrrrrrrrrrrsssssssss-->

                <div id="CustomersSection" class="section" style="display: none;">
                    <!-- Customers Table -->
                    <div id="customersTableContainer" class="customers-table">
                        <h4>All Customers</h4>

                        <!-- Search Bar -->
                        <div id="searchContainer" class="search-container">
                            <input type="text" id="searchInput" placeholder="Search for customers..." onkeyup="filterTable()">
                        </div>

                        <!-- Table -->
                        <div id="tableWrapper" class="table-container">
                            <table id="customersTable" class="responsive-table">
                                <thead>
                                    <tr>
                                        <th>Action</th>
                                        <th>Contact ID</th>
                                        <th>Business Name</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Pay Term</th>
                                        <th>Opening Balance</th>
                                        <th>Advance Balance</th>
                                        <th>Credit Limit</th>
                                        <th>Date</th>
                                        <th>Mobile</th>
                                        <th>Total Sales Due</th>
                                        <th>Total Sales Return Due</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   
                                </tbody>
                            </table>
                        </div>
                        <script>
                            // Function to initialize a DataTable with common settings
                            function initializeDataTable(tableId) {
                                return $(`#${tableId}`).DataTable({
                                    dom: 'Bfrtip', // Define button layout
                                    buttons: [
                                        'csv',
                                        'excel',
                                        'print',
                                        'colvis',
                                        {
                                            extend: 'pdfHtml5',
                                            orientation: 'landscape',
                                            pageSize: 'A4'
                                        }
                                    ],
                                    responsive: true,  // Make the table responsive
                                    paging: true       // Enable pagination
                                });
                            }
                        
                            $(document).ready(function () {
                                // Initialize DataTable
                                const customersTable = initializeDataTable('customersTable');
                        
                                // Function to load Customers data from the API
                                const loadCustomersData = () => {
                                    $.ajax({
                                        url: '/api/customers/',  // API endpoint to fetch customer data
                                        method: 'GET',
                                        success: function(data) {
                                            data.forEach(item => {
                                                customersTable.row.add([
                                                    `<button class="action-btn" onclick="viewCustomer('${item.contact_id}')">View</button>`,
                                                    item.contact_id,
                                                    item.business_name,
                                                    item.name,
                                                    item.email,
                                                    item.pay_term,
                                                    `$${item.opening_balance}`,
                                                    `$${item.advance_balance}`,
                                                    `$${item.credit_limit}`,
                                                    item.date,
                                                    item.mobile,
                                                    `$${item.total_sales_due}`,
                                                    `$${item.total_sales_return_due}`
                                                ]).draw(false);
                                            });
                                        },
                                        error: function(xhr, status, error) {
                                            console.error('Failed to fetch customer data:', error);
                                        }
                                    });
                                };
                        
                                // Load data into the table
                                loadCustomersData();
                        
                                // Search functionality to filter rows in the table
                                $('#searchInput').on('keyup', function () {
                                    customersTable.search(this.value).draw();
                                });
                            });
                        </script>
                        
                    </div>
                </div>


                <!-- Add Stockkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk Section -->

                <div id="add-stockSection" class="section" style="display: none;">
                    <div>
                        <h2>Add Stock</h2>
                        <form action="#" method="post">
                            <div class="field">
                                <label for="productName">Product Name:</label>
                                <input type="text" id="productName" name="productName" required>
                            </div>
                            <div class="field">
                                <label for="productCategory">Category:</label>
                                <select id="productCategory" name="productCategory" required>
                                    <option value="Electronics">Electronics</option>
                                    <option value="Clothing">Clothing</option>
                                    <option value="Groceries">Groceries</option>
                                    <option value="Furniture">Furniture</option>
                                </select>
                            </div>
                            <div class="field">
                                <label for="quantity">Quantity:</label>
                                <input type="number" id="quantity" name="quantity" required>
                            </div>
                            <div class="field">
                                <label for="price">Price per Unit:</label>
                                <input type="number" id="price" name="price" required>
                            </div>
                            <button type="submit" class="button">Add Stock</button>
                        </form>
                    </div>
                    <script>
                        $(document).ready(function () {
                            // Handle form submission
                            $('#addStockForm').on('submit', function (e) {
                                e.preventDefault();  // Prevent the default form submission
                    
                                const formData = {
                                    product_name: $('#productName').val(),
                                    category: $('#productCategory').val(),
                                    quantity: $('#quantity').val(),
                                    price_per_unit: $('#price').val(),
                                };
                    
                                $.ajax({
                                    url: '/api/add-stock/',  // API endpoint for adding stock
                                    method: 'POST',
                                    data: JSON.stringify(formData),
                                    contentType: 'application/json',
                                    success: function (response) {
                                        alert(response.message);  // Show success message
                                        // Optionally, reset the form fields after success
                                        $('#addStockForm')[0].reset();
                                    },
                                    error: function (xhr, status, error) {
                                        alert('Error adding stock!');
                                    }
                                });
                            });
                        });
                    </script>
                    

                </div>

                <!-- current stocccccccccccccccccccccccccccccccccccccccccccccccccccccck  -->

                <div id="current-stockSection" class="section" style="display: none;">
                    <div>
                        <h2>Current Stock</h2>
                        <table border="1" width="100%" cellpadding="10">
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Category</th>
                                    <th>Quantity</th>
                                    <th>Price per Unit</th>
                                    <th>Total Stock Value</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows of current stock data will go here -->
                            </tbody>
                        </table>
                    </div>
                    <script>
                        $(document).ready(function () {
                            // Fetch current stock data
                            $.ajax({
                                url: '/api/current-stock/',  // URL for the API endpoint
                                method: 'GET',
                                success: function (data) {
                                    let tableBody = $('#current-stock-table-body');
                                    tableBody.empty();  // Clear the table before adding new data
                                    
                                    // Loop through each stock item and create a new row
                                    data.forEach(function (item) {
                                        let row = `<tr>
                                            <td>${item.product_name}</td>
                                            <td>${item.category}</td>
                                            <td>${item.quantity}</td>
                                            <td>${item.price_per_unit}</td>
                                            <td>${item.total_stock_value}</td>
                                            <td><button class="action-btn" onclick="viewStock('${item.product_name}')">View</button></td>
                                        </tr>`;
                                        tableBody.append(row);
                                    });
                                },
                                error: function (xhr, status, error) {
                                    alert('Error fetching stock data!');
                                }
                            });
                        });
                    </script>
                    
                </div>

                <!-- outttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt of stock -->

                <div id="out-of-stockSection" class="section" style="display: none;">
                    <div>
                        <h2>Products out of stock</h2>
                        <table border="1" width="100%" cellpadding="10">
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Category</th>
                                    <th>Out of Stock Since</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows of out of stock data will go here -->
                            </tbody>
                        </table>
                    </div>
                    <script>
                        $(document).ready(function () {
                            // Fetch out-of-stock product data
                            $.ajax({
                                url: '/api/out-of-stock/',  // URL for the API endpoint
                                method: 'GET',
                                success: function (data) {
                                    let tableBody = $('#out-of-stock-table-body');
                                    tableBody.empty();  // Clear the table before adding new data
                                    
                                    // If no products are out of stock
                                    if (data.message) {
                                        tableBody.append(`<tr><td colspan="4">${data.message}</td></tr>`);
                                        return;
                                    }
                                    
                                    // Loop through each out-of-stock product and create a new row
                                    data.forEach(function (item) {
                                        let row = `<tr>
                                            <td>${item.product_name}</td>
                                            <td>${item.category}</td>
                                            <td>Unknown</td> <!-- You could calculate the date if you track it -->
                                            <td><button class="action-btn" onclick="viewProduct('${item.product_name}')">View</button></td>
                                        </tr>`;
                                        tableBody.append(row);
                                    });
                                },
                                error: function (xhr, status, error) {
                                    alert('Error fetching out-of-stock data!');
                                }
                            });
                        });
                    </script>
                    
                </div>

                <!-- all productsssssssssssssssssssssssssssssssssssssssssssssssssssssss  -->

                <div id="all-productsSection" class="section" style="display: none;">
                    <div>
                        <h2>All Products</h2>
                        <div class="filters">
                            <label for="categoryFilter">Filter by Category:</label>
                            <select id="categoryFilter" name="categoryFilter">
                                <option value="all">All</option>
                                <option value="Electronics">Electronics</option>
                                <option value="Clothing">Clothing</option>
                                <option value="Groceries">Groceries</option>
                                <option value="Furniture">Furniture</option>
                            </select>
                        </div>
                        <table border="1" width="100%" cellpadding="10">
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Category</th>
                                    <th>Stock Status</th>
                                    <th>Price per Unit</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows of all product data will go here -->
                            </tbody>
                        </table>
                    </div>
                    <script>
                        $(document).ready(function () {
                            // Function to fetch and display products based on category filter
                            function fetchProducts(category = 'all') {
                                $.ajax({
                                    url: '/api/products/',  // API endpoint to fetch products
                                    method: 'GET',
                                    data: { category: category },  // Send category as a query parameter
                                    success: function (data) {
                                        let tableBody = $('#product-table-body');
                                        tableBody.empty();  // Clear the table before adding new data
                    
                                        // Loop through the product data and display it in the table
                                        data.forEach(function (product) {
                                            let row = `<tr>
                                                <td>${product.product_name}</td>
                                                <td>${product.category}</td>
                                                <td>${product.stock_status}</td>
                                                <td>$${product.price_per_unit}</td>
                                                <td><button class="action-btn" onclick="viewProduct('${product.product_name}')">View</button></td>
                                            </tr>`;
                                            tableBody.append(row);
                                        });
                                    },
                                    error: function (xhr, status, error) {
                                        alert('Error fetching products!');
                                    }
                                });
                            }
                    
                            // Fetch all products on initial load
                            fetchProducts();
                    
                            // Trigger a fetch whenever the category filter is changed
                            $('#categoryFilter').change(function () {
                                const selectedCategory = $(this).val();
                                fetchProducts(selectedCategory);  // Fetch products with the selected category
                            });
                        });
                    </script>
                    
                </div>


                <!-- add invoiceeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee -->

                <div id="add-invoiceSection" class="section" style="display: none;">
                    <div class="form-container">
                        <h2>Add Invoice</h2>

                        <!-- Invoice Date -->
                        <div class="form-group">
                            <label for="invoiceDate">Invoice Date</label>
                            <input type="date" id="invoiceDate" name="invoiceDate">
                        </div>

                        <!-- Invoice Number -->
                        <div class="form-group">
                            <label for="invoiceNumber">Invoice No</label>
                            <input type="text" id="invoiceNumber" name="invoiceNumber" placeholder="Auto-generated">
                        </div>

                        <!-- Customer Selection -->
                        <div class="form-group">
                            <label for="customer">Customer</label>
                            <select id="customer" name="customer">
                                <option value="">Select a customer</option>
                                <!-- Dynamically populate options here -->
                                <option value="add_new">Add New Customer</option>
                            </select>
                        </div>

                        <!-- Sales Person -->
                        <div class="form-group">
                            <label for="salesPerson">Sales Person</label>
                            <input type="text" id="salesPerson" name="salesPerson">
                        </div>

                        <!-- Bill Items Grid -->
                        <h3>Bill Items</h3>
                        <div class="grid-container">
                            <div class="grid-item">
                                <label for="itemDesc">Item Desc</label>
                                <input type="text" id="itemDesc" name="itemDesc">
                            </div>
                            <div class="grid-item">
                                <label for="qty">Quantity</label>
                                <input type="number" id="qty" name="qty" min="0">
                            </div>
                            <div class="grid-item">
                                <label for="unitPrice">Unit Price (Ksh)</label>
                                <input type="number" id="unitPrice" name="unitPrice" step="0.01">
                            </div>
                            <div class="grid-item">
                                <label for="subtotal">Subtotal (Ksh)</label>
                                <input type="number" id="subtotal" name="subtotal" step="0.01">
                            </div>
                        </div>

                        <!-- Amounts Section -->
                        <h3>Amounts</h3>
                        <div class="form-group">
                            <label for="total">Total (Ksh)</label>
                            <input type="number" id="total" name="total" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="discountPercentage">Discount Percentage (%)</label>
                            <input type="number" id="discountPercentage" name="discountPercentage" step="0.01" max="100">
                        </div>
                        <div class="form-group">
                            <label for="tax">Tax (%)</label>
                            <input type="number" id="tax" name="tax" step="0.01" max="100">
                        </div>
                        <div class="form-group">
                            <label for="payment">Payment (Ksh)</label>
                            <input type="number" id="payment" name="payment" step="0.01">
                        </div>

                        <!-- Actions -->
                        <div class="actions">
                            <button type="submit">Submit</button>
                            <button type="reset">Reset</button>
                        </div>
                        <script>
                            $(document).ready(function () {
                                $('#invoiceForm').submit(function (event) {
                                    event.preventDefault();  // Prevent form from submitting normally
                        
                                    let formData = $(this).serializeArray();
                                    let data = {};
                        
                                    formData.forEach(function (item) {
                                        data[item.name] = item.value;
                                    });
                        
                                    // Send data to API
                                    $.ajax({
                                        url: '/api/invoices/',
                                        method: 'POST',
                                        data: JSON.stringify(data),
                                        contentType: 'application/json',
                                        success: function (response) {
                                            alert('Invoice created successfully!');
                                            console.log(response);
                                        },
                                        error: function (xhr, status, error) {
                                            alert('Error creating invoice!');
                                        }
                                    });
                                });
                            });
                        </script>
                        
                    </div>

                </div>

                <!-- iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii invoices -->

                <div id="invoicesSection" class="section" style="display: none;">
                    <div>
                        <h2>Invoices</h2>
                        <table border="1" width="100%" cellpadding="10">
                            <thead>
                                <tr>
                                    <th>Invoice No</th>
                                    <th>Customer</th>
                                    <th>Total</th>
                                    <th>Discount Percentage</th>
                                    <th>Payment</th>
                                    <th>Tax</th>
                                    <th>Invoice Date</th>
                                    <th>Added Time</th>
                                    <th>View Invoice</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows of invoice data should go here -->
                            </tbody>
                        </table>
                        <p><strong>Note:</strong> Click on "View Invoice" to view detailed information.</p>
                    </div>
                    <script>
                        // Function to load invoices from the backend
                        function loadInvoices() {
                            $.ajax({
                                url: '/api/invoices/',  // The API URL to fetch invoices
                                method: 'GET',
                                success: function(response) {
                                    let tableBody = $('#invoicesTableBody');
                                    tableBody.empty();  // Clear any existing rows
                    
                                    response.forEach(function(invoice) {
                                        let row = `<tr>
                                            <td>${invoice.invoice_number}</td>
                                            <td>${invoice.customer}</td>
                                            <td>${invoice.total}</td>
                                            <td>${invoice.discount_percentage}</td>
                                            <td>${invoice.payment}</td>
                                            <td>${invoice.tax}</td>
                                            <td>${invoice.invoice_date}</td>
                                            <td>${invoice.added_time}</td>
                                            <td><button onclick="viewInvoice('${invoice.invoice_number}')">View Invoice</button></td>
                                        </tr>`;
                                        tableBody.append(row);  // Add row to the table
                                    });
                                },
                                error: function(xhr, status, error) {
                                    console.error('Error fetching invoices:', error);
                                }
                            });
                        }
                    
                        // Call this function to load invoices when the section is shown
                        $(document).ready(function() {
                            // You can trigger this when the section becomes visible
                            $('#invoicesSection').on('show', function() {
                                loadInvoices();  // Load invoices on section display
                            });
                        });
                    
                        // Function to view an invoice's detailed information (optional)
                        function viewInvoice(invoiceNumber) {
                            alert('View detailed information for invoice ' + invoiceNumber);
                            // You can implement a separate view or modal to show invoice details
                        }
                    </script>
                    
                </div>



                <!-- adddddddddddddddddddddddddddddddddddddddddddddddddddddddddd customers -->

                <div id="add-customerSection" class="section" style="display: none;">
                    <div>
                        <h2>Add Customers</h2>
                        <form action="#" method="post">
                            <div class="field">
                                <label for="prefix">Prefix:</label>
                                <select id="prefix" name="prefix">
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Ms.">Ms.</option>
                                </select>
                            </div>
                            <div class="field">
                                <label for="firstName">First Name:</label>
                                <input type="text" id="firstName" name="firstName" required>
                            </div>
                            <div class="field">
                                <label for="lastName">Last Name:</label>
                                <input type="text" id="lastName" name="lastName" required>
                            </div>
                            <div class="field">
                                <label for="phoneNumber">Phone Number:</label>
                                <input type="tel" id="phoneNumber" name="phoneNumber" required>
                            </div>
                            <div class="field">
                                <label for="purchasedAmount">Purchased Amount:</label>
                                <input type="number" id="purchasedAmount" name="purchasedAmount" value="00" maxlength="6">
                            </div>
                            <button type="submit" class="button">Submit</button>
                            <button type="reset" class="button">Reset</button>
                        </form>
                    </div>
                    <script>
                        $(document).ready(function() {
                            $('#addCustomerForm').on('submit', function(event) {
                                event.preventDefault();
                    
                                // Get form data
                                var formData = {
                                    prefix: $('#prefix').val(),
                                    first_name: $('#firstName').val(),
                                    last_name: $('#lastName').val(),
                                    phone_number: $('#phoneNumber').val(),
                                    purchased_amount: $('#purchasedAmount').val(),
                                };
                    
                                // AJAX request to submit form data
                                $.ajax({
                                    url: '/api/customers/',  // The API endpoint to create a customer
                                    method: 'POST',
                                    data: JSON.stringify(formData),
                                    contentType: 'application/json',
                                    success: function(response) {
                                        alert('Customer added successfully!');
                                        // Optionally, reset the form or display new data
                                    },
                                    error: function(xhr, status, error) {
                                        alert('Error adding customer: ' + xhr.responseJSON.detail);
                                    }
                                });
                            });
                        });
                    </script>
                    
                </div>


                <!-- customer listttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt -->


                <div id="customers-listSection" class="section" style="display: none;">
                    <div>
                        <h2>Customers list</h2>
                        <table border="1" width="100%" cellpadding="10">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Customer ID</th>
                                    <th>Phone Number</th>
                                    <th>Purchased Amount</th>
                                    <th>View History</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows of customer data should go here -->
                            </tbody>
                        </table>
                    </div>
                    <script>
                        $(document).ready(function() {
                            // AJAX request to fetch customer list
                            $.ajax({
                                url: '/api/customers/list/',  // The API endpoint to get the customer list
                                method: 'GET',
                                success: function(response) {
                                    // Empty the table body before populating new rows
                                    $('#customer-list-body').empty();
                                    
                                    // Loop through customers and append rows to the table
                                    response.forEach(function(customer) {
                                        $('#customer-list-body').append(`
                                            <tr>
                                                <td>${customer.first_name} ${customer.last_name}</td>
                                                <td>${customer.id}</td>
                                                <td>${customer.phone_number}</td>
                                                <td>${customer.purchased_amount}</td>
                                                <td><button onclick="viewHistory(${customer.id})">View History</button></td>
                                            </tr>
                                        `);
                                    });
                                },
                                error: function(xhr, status, error) {
                                    alert('Error fetching customer list: ' + xhr.responseJSON.detail);
                                }
                            });
                            
                            // Function to view the customer history (can be expanded)
                            window.viewHistory = function(customerId) {
                                alert('Viewing history for Customer ID: ' + customerId);
                                // Implement further history details if needed
                            };
                        });
                    </script>
                    
                </div>


                <!-- adddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd discount  -->
                <div id="add-discountSection" class="section" style="display: none;">
                    <div>
                        <h2>Add Discount</h2>
                        <form action="#" method="post">
                            <div class="field">
                                <label for="fromDate">From:</label>
                                <input type="date" id="fromDate" name="fromDate" required>
                            </div>
                            <div class="field">
                                <label for="toDate">To:</label>
                                <input type="date" id="toDate" name="toDate" required>
                            </div>
                            <div class="field">
                                <label for="discountType">Discount Type:</label>
                                <select id="discountType" name="discountType" required>
                                    <option value="Product wise discount">Product wise discount</option>
                                    <option value="Total price discount">Total price discount</option>
                                </select>
                            </div>
                            <div class="field">
                                <label for="products">Products:</label>
                                <select id="products" name="products">
                                    <!-- Options for products should be dynamically added here -->
                                </select>
                            </div>
                            <div class="field">
                                <input type="checkbox" id="allProductsDiscount" name="allProductsDiscount">
                                <label for="allProductsDiscount">Discount for all products</label>
                            </div>
                            <div class="field">
                                <input type="checkbox" id="quantityBasedDiscount" name="quantityBasedDiscount">
                                <label for="quantityBasedDiscount">Quantity based discount</label>
                            </div>
                            <div class="field">
                                <label for="quantity">Quantity:</label>
                                <input type="number" id="quantity" name="quantity">
                            </div>
                            <div class="field">
                                <label for="totalPrice">Total Price:</label>
                                <input type="number" id="totalPrice" name="totalPrice">
                            </div>
                            <div class="field">
                                <label for="discountPercent">Discount Percent:</label>
                                <input type="number" id="discountPercent" name="discountPercent" required>
                            </div>
                            <button type="submit" class="button">Submit</button>
                            <button type="reset" class="button">Reset</button>
                        </form>
                    </div>
                    <script>
                    $(document).ready(function() {
                        // Handle form submission via AJAX
                        $('#add-discount-form').on('submit', function(e) {
                            e.preventDefault();
                            
                            // Gather form data
                            const formData = {
                                from_date: $('#fromDate').val(),
                                to_date: $('#toDate').val(),
                                discount_type: $('#discountType').val(),
                                products: $('#products').val(),  // Array of product IDs
                                all_products_discount: $('#allProductsDiscount').prop('checked'),
                                quantity_based_discount: $('#quantityBasedDiscount').prop('checked'),
                                quantity: $('#quantity').val(),
                                total_price: $('#totalPrice').val(),
                                discount_percent: $('#discountPercent').val(),
                            };
                    
                            // Send the data to the backend API
                            $.ajax({
                                url: '/api/discounts/add/',
                                type: 'POST',
                                data: JSON.stringify(formData),
                                contentType: 'application/json',
                                success: function(response) {
                                    alert('Discount added successfully');
                                },
                                error: function(xhr, status, error) {
                                    alert('Error adding discount: ' + xhr.responseJSON.detail);
                                }
                            });
                        });
                    });
                </script>
                </div>


                <!-- product-wise-discountooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo -->

                <div id="product-wise-discountSection" class="section" style="display: none;">
                    <div>
                        <h2>Product Wise Discount</h2>
                        <table border="1" cellpadding="10">
                            <thead>
                                <tr>
                                    <th>Discount Type</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th>Quantity</th>
                                    <th>Total Price</th>
                                    <th>Discount Percent</th>
                                    <th>Products</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows of discount data should go here -->
                            </tbody>
                        </table>
                    </div>
                    <script>
                    $(document).ready(function() {
                        // Fetch Product Wise Discount Data from the API
                        $.ajax({
                            url: '/api/product-wise-discounts/',
                            method: 'GET',
                            success: function(response) {
                                // Populate the table with data
                                let tableBody = $('#product-wise-discount-table-body');
                                tableBody.empty(); // Clear existing data
                    
                                response.forEach(function(discount) {
                                    let row = '<tr>';
                                    row += `<td>${discount.discount_type}</td>`;
                                    row += `<td>${discount.from_date}</td>`;
                                    row += `<td>${discount.to_date}</td>`;
                                    row += `<td>${discount.quantity}</td>`;
                                    row += `<td>${discount.total_price}</td>`;
                                    row += `<td>${discount.discount_percent}</td>`;
                                    
                                    // Product names
                                    let products = discount.products.map(product => product.name).join(', ');
                                    row += `<td>${products}</td>`;
                                    
                                    row += '</tr>';
                                    tableBody.append(row);
                                });
                            },
                            error: function(xhr, status, error) {
                                console.error('Error fetching data:', error);
                            }
                        });
                    });
                </script>
                </div>


               
        
                <!-- detailsssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss  -->
                <div id="store-detailsSection" class="section" style="display: none;">
                    <div>
                        <h3>Store Details</h3>
                        <i class="icon food-store"></i>
                        <div class="overview">
                            <h4>Overview</h4>
                            <p>Store Name: Store Name</p>
                            <p>Email: Email</p>
                            <p>Phone Number: Phone Number</p>
                            <p>Address: Address</p>
                        </div>
                        <div class="menu">
                            <button>Edit</button>
                            <button>Duplicate</button>
                            <button>Delete</button>
                            <button>Add</button>
                            <button>Print</button>
                            <button>Import</button>
                            <button>Export</button>
                        </div>
                        <script>
                        $(document).ready(function() {
                            // Fetch store details from the API
                            $.ajax({
                                url: '/api/store-details/',
                                method: 'GET',
                                success: function(response) {
                                    // Populate the store details in the HTML
                                    $('#store-name').text('Store Name: ' + response.name);
                                    $('#store-email').text('Email: ' + response.email);
                                    $('#store-phone').text('Phone Number: ' + response.phone_number);
                                    $('#store-address').text('Address: ' + response.address);
                        
                                    // Show the store details section
                                    $('#store-detailsSection').show();
                                },
                                error: function(xhr, status, error) {
                                    console.error('Error fetching store details:', error);
                                }
                            });
                        });
                      </script>               
                    </div>
                </div>



               

            <script>
                // JavaScript for toggling submenus and displaying content dynamically
                const toggleLinks = document.querySelectorAll('.toggle');
                const submenuLinks = document.querySelectorAll('.submenu-link');
                const contentArea = document.getElementById('content');

                // Function to load content based on data-content attribute
                function loadContent(contentType) {
                    console.log("Loading content:", contentType);  // Debugging line

                    // Hide all sections
                    const allSections = document.querySelectorAll('.section');
                    allSections.forEach(section => {
                        section.style.display = 'none';
                    });

                    // Show the section corresponding to the clicked link
                    const selectedSection = document.getElementById(contentType + 'Section');
                    if (selectedSection) {
                        selectedSection.style.display = 'block';
                    } else {
                        contentArea.innerHTML = '<h2>Error</h2><p>No content found for this section.</p>';
                    }
                }

                // Event listener for sidebar links to toggle submenus
                toggleLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        const submenu = e.target.nextElementSibling;
                        if (submenu && submenu.classList.contains('submenu')) {
                            submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
                        }
                        if (e.target.dataset.content === 'dashboard') {
                            loadContent('dashboard');
                        }
                    });
                });

                // Event listener for submenu links to load content
                submenuLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        const contentType = e.target.dataset.content;
                        loadContent(contentType);
                    });
                });

                // Load the default section (Dashboard) on page load
                document.addEventListener('DOMContentLoaded', () => {
                    loadContent('dashboard');  // Default content should be 'dashboard'
                });

                // Filter table rows based on search input
                function filterTable() {
                    const input = document.getElementById('searchInput');
                    const filter = input.value.toLowerCase();
                    const table = document.getElementById('suppliersTable', 'customersTable');
                    const rows = table.getElementsByTagName('tr');

                    for (let i = 1; i < rows.length; i++) {
                        const cells = rows[i].getElementsByTagName('td');
                        let rowMatch = false;
                        for (let j = 0; j < cells.length; j++) {
                            if (cells[j]) {
                                const cellValue = cells[j].textContent || cells[j].innerText;
                                if (cellValue.toLowerCase().indexOf(filter) > -1) {
                                    rowMatch = true;
                                    break;
                                }
                            }
                        }
                        rows[i].style.display = rowMatch ? '' : 'none';
                    }
                }

                function viewSupplier(id) {
                    alert('View details for supplier with Contact ID: ' + id);
                }

            </script>


</body>
</html>
